---
title: MoneyLog Beta
---

<p>O MoneyLog Beta é para os nerds. É para quem prefere o poder e a flexibilidade, mesmo sendo mais difícil de lidar.</p>

<p>O seu código é sempre o mais atualizado, pois vem direto do GitHub. Funciona offline, pois só usa arquivos locais. Usa arquivos TXT para guardar os dados. Totalmente configurável (e raqueável) via arquivo JavaScript local. Pode usar <a href="#cloud">junto com o Cloud</a>. E a cor da interface é preta, a única cor verdadeiramente nerd :)</p>

<p>Pode quebrar? Claro! Por isso o nome Beta. Mas <strong>esta é a versão que eu uso</strong>, então eu tenho muito cuidado para deixá-la sempre funcionando.</p>

<blockquote>
  Nota: Se você já usava a versão Beta antes de 2012, leia o <a href="/moneylog/beta/update-2012.html">Guia de Migração</a> pois há algumas mudanças importantes que requerem sua ação.
</blockquote>

<blockquote>
  Nota: <a href="#bug-chrome">O Google Chrome é feio, bobo e chato</a> :(
</blockquote>

<p>Acesse a demonstração online: Que demo o que… <a href="#download">Baixa logo aí</a>.</p>

<nav>
  <ul>
    <li><a href="#download">Download</a></li>
    <li><a href="#update">Atualização</a></li>
    <li><a href="#config">Arquivo de configuração</a></li>
    <li><a href="#txt">Arquivo TXT para os lançamentos</a></li>
    <li><a href="#inserir">Inserir seus lançamentos</a></li>
    <li><a href="#parabens">Parabéns!</a></li>
    <li><a href="#seu-widget">Faça seu próprio Widget</a></li>
    <li><a href="#online">Funcionamento Online</a></li>
    <li><a href="#cloud">Usar o MoneyLog Cloud ao mesmo tempo</a></li>
    <li><a href="#bug-acentos">Problemas com acentuação?</a></li>
    <li><a href="#bug-chrome">Não funciona no Google Chrome</a></li>
  </ul>
</nav>

<h2 id="download">Download</h2>

<pre>
git clone \
    https://github.com/aureliojargas/moneylog.git \
    moneylog-beta
</pre>

<p>O repositório será copiado para a pasta local <code>moneylog-beta</code>. Quando ele terminar de baixar, abra o arquivo <code>moneylog.html</code> em seu navegador (<a href="#bug-chrome">que não seja o Google Chrome…</a>).</p>

<h2 id="update">Atualização</h2>

<p>Para sincronizar a sua versão local com os arquivos mais recentes do GitHub:</p>

<pre>
cd moneylog-beta
git pull
</pre>

<p>Rode este comando de tempos em tempos, ou coloque no cron.</p>

<h2 id="config">Arquivo de configuração</h2>

<p>Todas as <a href="/moneylog/config/">configurações</a> devem ser colocadas no arquivo <code>config.js</code>.</p>

<p>Este arquivo não existe, você deve criá-lo dentro de sua pasta do MoneyLog Beta, já na raiz. Basta copiar o modelo comentado, que vem na pasta sample:</p>

<pre>
cp sample/config-pt.js config.js
</pre>

<p>Pode ficar tranquilo, suas alterações no <code>config.js</code> não serão perdidas quando você <a href="#update">atualizar</a> o MoneyLog Beta.</p>

<h2 id="txt">Arquivo TXT para os lançamentos</h2>

<p>Por padrão o MoneyLog Beta carrega os lançamentos do arquivo de exemplo: <code>sample/data-pt.txt</code>. NÃO coloque seus dados neste arquivo.</p>

<p>Crie uma pasta chamada <code>txt</code> dentro de sua pasta do MoneyLog Beta. E ali dentro crie os arquivos TXT para guardar seus lançamentos. Para começar simples, crie um único arquivo.</p>

<pre>
mkdir txt
echo &gt; txt/dados.txt
</pre>

<blockquote>
  Nota: O arquivo TXT poderia estar em qualquer pasta de seu computador, mas é melhor deixar aqui dentro da pasta do MoneyLog Beta para evitar problemas com <a href="https://developer.mozilla.org/en/Same-origin_policy_for_file%3a_URIs">navegadores paranóicos</a>.
</blockquote>

<blockquote>
  Nota: Usar uma pasta chamada txt vai facilitar a <a href="#cloud">integração com o Cloud</a>.
</blockquote>

<blockquote>
  Importante: Todos os arquivos TXT devem usar a codificação UTF-8.
</blockquote>

<p>Agora que você criou o arquivo, precisa configurar o MoneyLog para utilizá-lo. Edite o <a href="#config">config.js</a> e procure pela configuração <code>dataFiles</code>. Descomente a linha e coloque o path do seu arquivo, assim:</p>

<pre>
dataFiles = ['txt/dados.txt'];
</pre>

<p>Abra o MoneyLog Beta em seu navegador. Se aparecer a mensagem "<em>Nenhum lançamento</em>", sorria. Está tudo configurado e funcionando corretamente.</p>

<p class="figure">
  <img src="/moneylog/img/beta-txt-ok-400.png">
</p>

<h2 id="inserir">Inserir seus lançamentos</h2>

<p>Agora é seu momento de glória, a hora de inserir seus próprios lançamentos no MoneyLog. Já sabe onde, né? No <code>dados.txt</code>, claro.</p>

<p>O formato de cada lançamento é simples, usa apenas três campos: data, valor, descrição. Dúvidas? Consulte o arquivo de exemplo <code>sample/data-pt.txt</code> e o <a href="/moneylog/input/">Guia de Lançamentos</a>.</p>

<p>Sempre que quiser conferir como está ficando, salve o arquivo no editor de textos e recarregue o MoneyLog Beta no navegador.</p>

<p>Você também pode importar dados de outros programas ou direto de seu Internet Banking. Utilize o <a href="/moneylog/import/">conversor do MoneyLog</a>, que entende os seguintes formatos: OFX, OFC, QIF (MS Money, Quicken).</p>

<h2 id="parabens">Parabéns!</h2>

<p>Seu MoneyLog Beta está funcionando corretamente e agora você já pode dominar seus gastos, não deixando nem um centavinho sequer esquecido.</p>

<p>Aconselho que você use um tempo o MoneyLog Beta para se acostumar bem com ele, antes de continuar a leitura deste artigo, que aborda tópicos mais avançados.</p>
<hr class="light">

<h2 id="seu-widget">Faça seu próprio Widget</h2>

<p>Se você manja de HTML e JavaScript, saiba que é muito fácil criar um widget novo ali na barra lateral, bastam poucas linhas de código no final de seu <a href="#config">config.js</a>.</p>

<p>Há quatro widgets de exemplo:</p>

<ul>
  <li>
    <a href="https://github.com/aureliojargas/moneylog-plugins/blob/master/widget-hello-world.js">widget-hello-world.js</a>
  </li>
  <li>
    <a href="https://github.com/aureliojargas/moneylog-plugins/blob/master/widget-hello-translation.js">widget-hello-translation.js</a>
  </li>
  <li>
    <a href="https://github.com/aureliojargas/moneylog-plugins/blob/master/widget-hello-checkbox.js">widget-hello-checkbox.js</a>
  </li>
  <li>
    <a href="https://github.com/aureliojargas/moneylog-plugins/blob/master/widget-nerd-toy.js">widget-nerd-toy.js</a>
  </li>
</ul>

<p>E o teu widget, vai ser do que? Lembretes? Algum somatório especial? Exportar os dados do extrato para CSV? Use a criatividade! E depois contribua lá no repositório: <a href="https://github.com/aureliojargas/moneylog-plugins">https://github.com/aureliojargas/moneylog-plugins</a></p>

<h2 id="online">Funcionamento Online</h2>

<p>O MoneyLog Beta foi criado para funcionar offline, em sua máquina. Mas você também pode ter fazê-lo funcionar (read-only) pela rede.</p>

<p>Para poder consultar o MoneyLog Beta <strong>na rede local</strong>, rode o Apache em sua máquina e coloque os arquivos do MoneyLog nele. Acesse normalmente pelo navegador, usando o endereço de sua máquina.</p>

<p>Para poder consultar o MoneyLog Beta <strong>pela internet</strong>, suba os arquivos para um servidor remoto (tipo o <a href="http://www.dreamhost.com/r.cgi?251258">DreamHost</a>) e coloque-os em uma pasta escondida de algum site que você já possua.</p>

<p>De uma forma ou de outra, aconselho também <a href="/moneylog/config/#myPassword">colocar uma senha de acesso</a> para evitar curiosos.</p>

<p>Mas a melhor solução mesmo, é usar o MoneyLog Cloud para acesso remoto. Veja o próximo tópico.</p>

<h2 id="cloud">Usar o MoneyLog Cloud ao mesmo tempo</h2>

<p>Que tal ter uma solução completa, offline e online, usando dois sabores do MoneyLog ao mesmo tempo?</p>

<ul>
  <li>Para acesso local, use o MoneyLog Beta.</li>
  <li>Quando estiver longe de sua máquina, use o <a href="http://aurelio.net/moneylog/cloud/">MoneyLog Cloud</a>.
  </li>
</ul>

<p>Para que este esquema funcione, você deve usar o mesmo <a href="#config">arquivo de configuração</a> e os mesmos <a href="#txt">arquivos TXT</a> para as duas versões. Veja como conseguir isso:</p>

<ol>
  <li>Vá lá no <a href="http://moneylog-cloud.aurelio.net">Cloud</a> e <a href="http://aurelio.net/moneylog/cloud/#conectar">conecte-se</a>.
  </li>
  <li>Entre na pasta /Apps/MoneyLog Cloud, que foi criada em seu Dropbox:
    <pre>
cd ~/Dropbox/Apps/MoneyLog Cloud
</pre>
  </li>
  <li>Crie symlinks para os seus arquivos originais do MoneyLog Beta:
    <pre>
rm -rf config.js txt/
ln -s /caminho/para/moneylog-beta/config.js .
ln -s /caminho/para/moneylog-beta/txt/ .
</pre>
  </li>
  <li>Espere o Dropbox sincronizar tudo.</li>
  <li>Acesse novamente o <a href="http://moneylog-cloud.aurelio.net">Cloud</a>, agora os seus dados devem aparecer.
  </li>
</ol>

<h2 id="bug-acentos">Problemas com acentuação?</h2>

<p>O <strong>Firefox</strong> parece ter algum problema em alguns casos, de carregar os acentos incorretamente da primeira vez. Mas basta recarregar a página e tudo fica normal. É um comportamento estranho, que não ocorre com todo mundo. Aqui no meu Firefox do Mac, por exemplo, isso não acontece. De qualquer forma, fica o recado: <strong>Reload</strong> em caso de problemas.</p>

<p>O <strong>Camino</strong> (derivado do Firefox pro Mac), não aceita os acentos nem com Reload. A única solução é mudar a codificação do seu arquivo TXT do padrão UTF-8 para o antigo ISO-8859-1. A troca é fácil:</p>

<pre>
# Converter os dados de UTF-8 para ISO-8859-1
cp dados.txt dados-utf.txt
iconv -f utf-8 -t iso-8859-1 dados-utf.txt &gt; dados.txt
</pre>

<p>Outros navegadores (inclusive IE7 e IE8) não apresentaram problemas com acentos em meus testes.</p>

<h2 id="bug-chrome">Não funciona no Google Chrome</h2>

<p>A partir da versão 5.0.335, o Google Chrome endureceu as regras de segurança e <a href="http://code.google.com/p/chromium/issues/detail?id=4197">bloqueou completamente</a> a leitura de arquivos locais, mesmo que estejam na mesma pasta.</p>

<p>Sabe o seu querido arquivo TXT com os lançamentos do MoneyLog? Pois é, o Chrome não deixa mais fazer a leitura dele, e na tela só aparecerá a seguinte mensagem:</p>

<blockquote>
  Carregando arquivo.txt...
</blockquote>

<p>As soluções:</p>

<ul>
  <li>Usar outro navegador. Só o Chrome tem essa nova política extrema.</li>
  <li>Usar uma versão antiga do Chrome como a 4.x.</li>
  <li>Usar uma opção mágica na linha de comando, para que o Chrome desligue esta nova política:
    <ul>
      <li><strong>Linux:</strong> google-chrome --allow-file-access-from-files</li>
      <li><strong>Mac:</strong> /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files &gt;/dev/null 2&gt;&amp;1</li>
      <li><strong>Windows:</strong> "…\Application\chrome.exe" --allow-file-access-from-files</li>
    </ul>
  </li>
</ul>
