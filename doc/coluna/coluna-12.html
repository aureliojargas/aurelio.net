<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.sf.net">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>coluna do aurelio 12</TITLE>

<!-- Included coluna.css -->
<STYLE TYPE="text/css">
/* --css-inside: Se mudar algo, regerar todas as colunas */
h1, h3    { color: green     ; }
h2        { color: lightgreen; }
code      { color: white     ;      font-weight: bold   ; }
a         { color: yellow    ;  text-decoration: none   ; }
a:visited { color: purple    ; }
body      { color: silver    ; background-color: black  ;
           margin: 2em       ;       text-align: justify; }
</STYLE>

</HEAD>
<BODY>

<DIV CLASS="header" ID="header">
<H1>coluna do aurelio 12</H1>
<H2>lynx (navegação turbinada)</H2>
<H3>http://aurelio.net/doc/coluna</H3>
</DIV>

<DIV CLASS="body" ID="body">
	<BLOCKQUOTE>
	"mas afinal, que graça tem ver a internet apenas como texto?"
	- indagam os incrédulos.
	</BLOCKQUOTE>
<P></P>
<P>
depende.  se você está navegando despreocupadamente, a passeio, e com um
link rápido, não tem muita graça mesmo, use o netscape. mas se você está
com o tempo curto,  fazendo pesquisas na internet e num link lento, para
que perder tempo com vários tipos de fonte,  tamanhos, cores, formatação
desnecessária, imagens gratuitas, banners, flash, shockwave, javascript,
e outras novidades tecnológicas inúteis que inventarão?
</P>
<P>
como trabalhar com o auxílio da internet para obter informações é rotina
de muitos, o navegador <CODE>lynx</CODE> (<A HREF="http://lynx.browser.org">http://lynx.browser.org</A>) é uma ferramenta
indispensável.  para começo de conversa, como bom navegador texto que é,
ele  nem tenta carregar as imagens da página, ou interpretar javascript,
flash e outras "linguagens de programação" similares, mostrando a página
mais rápido que qualquer navegador gráfico.
</P>
<P>
como  também  não  precisa  se  preocupar com tamanhos, cores e tipos de
fontes  e  desenho  de  frames e linhas  de  tabela, o  texto é  cuspido
rapidamente  na tela.  falando  sobre tabelas, versões mais  recentes do
<CODE>lynx</CODE>  até   fazem  algum  tratamento   nelas,  tabulando  as  colunas,
alinhando-as. mas sem desenhar as bordas, continua tudo apenas texto.
</P>
<P>
este é o  grande trunfo do <CODE>lynx</CODE> sobre  seus "concorrentes",  sempre se
tem apenas  texto na tela, texto este que  pode ser  gravado num arquivo
(comando <CODE>p</CODE> - Print) e "grepado" ou editado facilmente.
</P>
<P>
então para começar, pode-se chamar o programa já indicando a URL:
</P>
<PRE>
    lynx http://aurelio.net
</PRE>
<P></P>
<P>
ou dentro dele, coloque uma URL nova com o comando <CODE>g</CODE> (Go to), ou edite
a URL atual com o gê maiúsculo: <CODE>G</CODE> (g/G, lembrou do vi?). ah! por falar
em <CODE>grep</CODE>, para procurar um texto qualquer na página, use a barra <CODE>/</CODE>.
</P>
<P>
a navegação entre links e páginas é feita de forma intuitiva, utilizando
as setas  <CODE>-&gt;</CODE> e <CODE>&lt;-</CODE>  para ir e voltar. as setas para cima e para baixo
servem  para escolher  os links  da página  e <CODE>Page Up/Down</CODE> servem para
rolá-la. para sair, <CODE>q</CODE>.
</P>
<P>
para saciar  a curiosidade  de quem  nunca viu  uma página HTML  em modo
texto, aqui vai um <CODE>screenshot</CODE>:
</P>
<PRE>
				 Título

   Um parágrafo normal de texto, com uma imagem: [ovni.jpg], seguida de
um   texto
  pré     formatado.

   E agora uma lista de itens e subitens:
     * segunda-feira
     * terça-feira
          + tomar banho
          + pagar contas
               o telefone
               o luz
               o água
     * quarta-feira
     * ...

   E para terminar uma tabelinha de 3 colunas:

   joão manoel              (operador)       manhã/tarde
   josé maria          (manutenção elétrica)       tarde
   jair antônio carlos       (limpeza)             noite

   Obs.: note os alinhamentos esquerda/centralizado/direita
</PRE>
<P></P>
<P>
como se pode ver, as imagens aparecem apenas com o nome entre colchetes,
ou com o conteúdo do campo <CODE>ALT=""</CODE>, caso especificado. entrando na tela
de opções  (comando <CODE>o</CODE>),  podemos ignorar completamente  as imagens, ou
mostrá-las como links, para vê-las se quiser.
</P>
<P>
mas como ver imagens num navegador texto? basta usar um visualizador de
imagens externo para console, como o <CODE>zgv</CODE> (veja coluna do aurelio #3).
o <CODE>lynx</CODE>  respeita  as configurações de <CODE>mime types</CODE> e  seus programas,
então basta adicionar a seguinte linha em seu <CODE>/etc/mailcap</CODE>:
</P>
<PRE>
    image/*; /usr/bin/zgv %s
</PRE>
<P></P>
<P>
e ao  seguir um link que aponta  para uma imagem, o <CODE>zgv</CODE> é chamado para
mostrá-la.  mas mostrar imagens é uma das  últimas coisas que se quer de
um navegador texto, então vamos para a parte quente: extração de dados.
</P>
<P>
reforçando,  como visto  no exemplo,  até as tabelas  são  representadas
apenas com texto,  então a extração de informação  fica facilitada,  não
precisando ignorar caracteres embelezadores.
</P>
<P>
uma tarefa bem comum,  é uma extração automatizada  de dados à partir de
uma página qualquer,  digamos,  uma que tenha a cotação diária do dólar.
lááááá no meio  da página, depois  de quilos  de banners de propaganda e
links de navegação do site, tem uma linha assim:
</P>
<PRE>
    Dólar paralelo (08/11/2001): R$ 2,62 compra   R$ 2,67 venda 
</PRE>
<P></P>
<P>
e precisamos  extrair diariamente,  as cotações  de compra  e venda para
colocar num documento local.  do diariamente,  o <CODE>crontab</CODE> se encarrega.
mas  como extrair apenas um trecho de uma página da internet?  temos uma
opção mágica  para que o <CODE>lynx</CODE>  busque a página,  renderize-a e cuspa o
texto na saída padrão:
</P>
<PRE>
    lynx -dump http://www.cotacaodolar.com.br/hoje.html
</PRE>
<P></P>
<P>
ou ainda, você pode gravar a página toda num arquivo:
</P>
<PRE>
    lynx -dump http://www.cotacaodolar.com.br/hoje.html &gt; cotacao.txt
</PRE>
<P></P>
<P>
e pronto! mais da metade do caminho já está andada.  com o texto na mão,
basta um "pipe" e um <CODE>grep</CODE> e nosso problema está resolvido:
</P>
<PRE>
    lynx -dump http://www.cotacaodolar.com.br/hoje.html | grep 'paralelo'
</PRE>
<P></P>
<P>
e temos extraída  apenas a linha  com as informações desejadas,  obtidas
fresquinhas direto da internet. percebeu o poder disso?  usando o <CODE>lynx</CODE>
e filtros como  <CODE>grep</CODE>,  <CODE>sed</CODE> e  <CODE>awk</CODE>, pode-se obter  automaticamente,
QUALQUER  dado de  QUALQUER  página da internet.  deixemos os planos de
dominação mundial para depois e vamos continuar a estressar o assunto.
</P>
<P>
suponhamos  que você precise baixar  a página em HTML  mesmo, ou extrair
dados que estão  "escondidos"  nas marcações e atributos de formulários.
sem problema,  usando o  <CODE>-source</CODE> baixamos a página "como ela é", igual
ao "salvar como" de outros navegadores, ou o <CODE>wget</CODE>:
</P>
<PRE>
    lynx -source http://www.cotacaodolar.com.br/hoje.html &gt; dolar.html
</PRE>
<P></P>
<P>
principalmente os que sofrem  com conexões lentas,  essa automatização é
benéfica e econômica.  digamos que você  todos os dias acessa dois sites
de notícia,  um de esportes  e um de variedades para ver as novidades do
dia. então basta fazer um script rápido onde o  <CODE>lynx</CODE> baixa todas essas
páginas. então você se conecta, roda o script, se desconecta, e pode ler
as notícias com calma, sem gastar telefone.
</P>
<P>
e ainda, um segundo script pode reformatar as páginas,  tirando todas as
propagandas, alterando fontes e cores, ou seja, uma personalização local
da página para que sua leitura fique mais agradável.
</P>
<P>
mas além de obter,  você também pode  enviar informações automaticamente
(olha lá o que você vai fazer hein?). que tal preencher formulários para
várias pessoas obtendo  os dados de um banco de dados  local e enviá-los
para um site qualquer da internet?
</P>
<PRE>
    echo "nome=carlos&amp;idade=33&amp;..." | lynx -post-data http://www.../cadastro.cgi
</PRE>
<P></P>
<P>
pa bo en me pa ba.
</P>
<P>
para ver usos práticos do  <CODE>lynx</CODE>  para envio e obtenção automatizada de
informações,  acesse <A HREF="http://funcoeszz.net">http://funcoeszz.net</A>,  a casa das "funções ZZ", um
pacote de funções diversas para  bash que usam <CODE>lynx</CODE> e <CODE>sed</CODE> para obter
e formatar informações,  fazendo pesquisas na  internet em  dicionários,
tradutores, imposto de renda, cotação do dólar e outros.
</P>
<P>
além do  <CODE>lynx</CODE>  há outros dois navegadores  para modo texto  que trazem
funcionalidades  a mais  e dividem  a preferência  dos usuários: <CODE>links</CODE>
(<A HREF="http://artax.karlin.mff.cuni.cz/~mikulas/links">http://artax.karlin.mff.cuni.cz/~mikulas/links</A>) e <CODE>w3m</CODE>
(<A HREF="http://ei5nazha.yz.yamagata-u.ac.jp/~aito/w3m/eng">http://ei5nazha.yz.yamagata-u.ac.jp/~aito/w3m/eng</A>),  que possuem, entre
outros, renderização de cores,  tabelas e frames, e abertura de links em
outras janelas  (use com o <CODE>screen</CODE>!).  eles também contam com suporte a
mouse, com direito a menu de contexto no botão direito (eca!).  mas note
que o <CODE>links</CODE> tem um problema  crônico com cookies e autenticação <CODE>http</CODE>
via proxy.
</P>
<P>
vida longa aos navegadores em modo texto, pois na busca de informações o
que importa é o conteúdo, e não sua apresentação.
</P>
<HR NOSHADE SIZE=1>
<P>
 <IMG ALIGN="right" SRC="../../img/t2tpowered.png" BORDER="0" ALT="">
<A HREF=".">&lt;--- Voltar para o índice</A>
</P>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-280222-1";
urchinTracker();
</script>
</DIV>

<!-- html code generated by txt2tags 2.3.3-dev (http://txt2tags.sf.net) -->
<!-- cmdline: txt2tags -C config.t2t coluna-12.t2t -->
</BODY></HTML>
