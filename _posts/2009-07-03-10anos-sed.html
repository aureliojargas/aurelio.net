---
author: aurelio
layout: twentyten-child
slug: 10anos-sed
title: '10anos: Sed'
wordpress_id: 872
wp_categories:
- sitelog
wp_tags:
- 10anos
- conectiva
- expressoes-regulares
- linux
- livro
- sed
- sedsed
- sedsokoban
- txt2tags
prev_title: "10anos: Vim"
prev_url: http://aurelio.net/blog/2009/06/30/10anos-vim/
next_title: "10anos: Expressões Regulares"
next_url: http://aurelio.net/blog/2009/07/17/10anos-expressoes-regulares/
shortlink: http://wp.me/p1ABFN-e4
---


<blockquote>
<p style="text-align:left;"><span style="color:#333333;"><em>Comemoração de 10 anos do meu site AURELIO.NET<br />
Parte 3</em></span></p></blockquote>
<ol>
<li><span style="color:#333333;"><em><a href="http://aurelio.net/blog/2009/06/27/10-anos-de-saite/">10 anos de sáite</a></em></span></li>
<li><span style="color:#333333;"><em><a href="http://aurelio.net/blog/2009/06/30/10anos-vim/">10anos: Vim</a></em></span></li>
<li><span style="color:#333333;"><em>10anos: Sed</em></span></li>
<li><span style="color:#333333;"><em><a href="http://aurelio.net/blog/2009/07/17/10anos-expressoes-regulares/">10anos: Expressões Regulares</a></em></span></li>
</ol>
<p style="text-align:center;">————— ∞ —————</p>
<p>Lá pelos idos de 1997, em uma tarde de trabalho na Conectiva…</p>
<p>— <a href="http://twitter.com/acmel">Arnaldo</a>, aqui no meu script eu precisava trocar essa palavra por outra, tem algum comando que faz isso?<br />
— Tem um lá, cuméunómi, sed! Pergunta pro cachorrão que ele manja.</p>
<p>(caminho até a sala ao lado)</p>
<p>— Fábio, me disseram que você manja de um tal de sed.<br />
— Sei usar mais ou menos, o bichinho é meio complicado.<br />
— Minsina?<br />
— Tá.</p>
<p>E este foi o dia em que conheci o Sed pela primeira vez. O Fábio “cachorrão” me mostrou como fazer um <strong>s///g</strong> e explicou que isso trocava uma palavra por outra. Ele disse que tinha uns curingas que dava pra usar também, tipo o asterisco, mas ele não sabia direito e ia na tentativa e erro. Um tempo depois fui descobrir que os tais curingas eram as <a href="http://aurelio.net/regex/">Expressões Regulares</a>, mas essa é uma história para um próximo post dessa série dos 10 anos :)</p>
<blockquote><p>Ah, os bons tempos do início de Conectiva. O Unix/Linux ainda era um desconhecido mundo novo, que cada um ali sabia um pouco e juntos tínhamos um corpo técnico que conseguia se entender no sistema. A documentação disponível era somente as man pages e as escassas listas de discussão. A Internet não era tão informativa e útil quanto hoje.</p></blockquote>
<p>Passei um bom tempo somente usando o tradicional <strong>s/isso/aquilo/g</strong> sem pensar muito sobre o Sed, pois afinal, ele estava fazendo o que eu queria: trocar palavras.</p>
<p>Engraçado que demorei para aprender que o <strong>g</strong> no final do s///g não era obrigatório! Para mim desde o início o g fazia parte da estrutura do comando e pronto. Começa com s, termina com g e bota três barras no meio. Faz sentido, não? :)</p>
<p>Depois da primeira grande descoberta que o g era um modificador para o comando, e que eu podia trocar somente a primeira palavra caso eu não o utilizasse, fui ler a man page do Sed para ver se não conseguia aprender mais alguma dica útil sobre o comando. Então descobri que eu podia colocar números ali no final também, para trocar somente a N-ésima palavra, tipo <strong>s/isso/aquilo/3</strong> para trocar somente a terceira.</p>
<p><img class="alignright size-full wp-image-880" title="lampada-ideia" src="http://aurelio.net/wp/wp-content/uploads/2009/07/lampada-ideia.gif" alt="lampada-ideia" width="60" height="71" /></p>
<p>Nooosa, descobri a pólvora!<br />
Eu já sabia “trocar palavras” de três maneiras diferentes!<br />
Dominei a parada!<br />
\o/</p>
<p>Ah… a inocência da ignorância.</p>
<p>Levou mais um bom tempo para eu me tocar que eu tinha visto apenas a pontinha do iceberg. Mais tarde, lendo com calma a man page, descobri a pólvora novamente: o Sed tinha outros comandos além do s///g! Como assim? Eu posso fazer outras coisas além de trocar palavras? Que massa!</p>
<p>Empolgado, fui testar alguns comandos. Não entendi a maioria, mas consegui brincar com o <strong>d</strong> e o <strong>q</strong>. Também aprendi que o Sed podia receber endereços, que diziam exatamente em quais linhas ele iria aplicar o comando. Se por exemplo eu quisesse fazer a minha já manjada troca de palavras apenas nas cinco primeiras linhas do arquivo, bastava fazer um <strong>sed “1,5 s/isso/aquilo/g”</strong>. Ou se em vez disso quisesse apagar estas mesmas linhas, bastava trocar o comando: <strong>sed “1,5 d”</strong>.</p>
<p>Como diria o <a href="http://jovemnerd.ig.com.br/categoria/nerdcast/">Jovem Nerd</a>, MINHA CABEÇA EXPLODIU!</p>
<p><img class="aligncenter size-full wp-image-877" title="cabeca-explodiu" src="http://aurelio.net/wp/wp-content/uploads/2009/07/cabeca-explodiu.gif" alt="cabeca-explodiu" width="200" height="150" /></p>
<p>Um mundo de possibilidades se abriu, de repente eu podia “editar um texto automaticamente”! Uau, eu não precisaria abrir o <a href="http://aurelio.net/vim/">Vim</a> para fazer edições rápidas, podia automatizar tudo!</p>
<p>Fui falar com o Fábio, meu guru de Sed, todo empolgado porque eu tinha descoberto aquilo sozinho sem perguntar pra ele. Fiquei chocado quando ele disse que nunca tinha usado aquilo.</p>
<p>Para.<br />
Volta.<br />
Processa.<br />
Eu acabei de ensinar algo novo para o meu guru?</p>
<p>Deste ponto em diante, foi um caminho sem volta, o Sed entrou de sola em minha vida. Além de eu estar empolgadíssimo por ter descoberto (parte de) seu poder e suas possibilidades, foi minha primeira chance de ser o especialista em algum assunto lá dentro da Conectiva. Sabe como é, primeiro emprego, novato em absolutamente tudo, era uma chance de ouro que eu agarrei forte.</p>
<p>Eu desejei o posto do Fábio de “guru do Sed” dentro da Conectiva, e me cocei para conquistá-lo. Assinei a <a href="http://tech.groups.yahoo.com/group/sed-users/">lista de discussão gringa</a> (meu inglês ainda era sofrido), li a man page inúmeras vezes (demorei bastante pra entender tudo), baixei o <a href="http://sed.sourceforge.net/sedfaq.html">FAQ</a> e levei para casa. Durante várias noites eu fiz a leitura atenta do FAQ, item por item, executando cada comando até entender o que ele fazia e como fazia. E assim, numa imersão obstinada acompanhada de um superintensivo noturno, eu “vi a luz” do Sed.</p>
<blockquote><p>Quem já brincou um pouco de Sed já pode adivinhar que por causa destes estudos <a href="http://aurelio.net/regex/">um outro assunto</a> (bem mais cabuloso) caiu no meu colo, e não tive como evitar :)</p></blockquote>
<p>Com o aprendizado, o Sed já não me assustava mais. Comecei a utilizá-lo intensivamente nos meus scripts (o que consolidou e expandiu o aprendizado) e eu até já conseguia responder dúvidas de novatos lá na lista de discussão! Dentro da empresa, aos poucos fui mostrando que eu agora entendia daquele assunto.</p>
<p>Finalmente, em um dia de trabalho qualquer, eu lá scriptando na minha máquina, chega o Arnaldo e diz:</p>
<p>— E aí “sed man”!</p>
<p><img class="size-full wp-image-888 alignnone" title="lagrimas-olhos" src="http://aurelio.net/wp/wp-content/uploads/2009/07/lagrimas-olhos.jpg" alt="lagrimas-olhos" width="171" height="148" /></p>
<p style="text-align:center;">————— ∞ —————</p>
<p>Bom relembrar…</p>
<p>Então, mas como o conhecimento somente dentro da cabeça não tem muita utilidade para o mundo, tentei fazer a minha parte para ajudar a divulgar o Sed por aqui.</p>
<p>Documentação em português era simplesmente inexistente.</p>
<p>Em <strong>1999</strong> criei a <a href="http://br.groups.yahoo.com/group/sed-br/">lista sed-br</a> para servir de aprendizado e ponto de encontro dos usuários do programa. Aos poucos ela foi crescendo, crescendo, contando hoje com quase 800 inscritos. Muitas discussões densas já aconteceram por lá, sobre Sed e <a href="http://aurelio.net/regex/">Expressões Regulares</a>. Saudades da época de ouro da lista, quando grandes conhecedores do Sed também estavam por lá participando, como o <a href="http://www.euodeio.net/">Eliphas Theodoro</a> e o <a href="http://thobias.org/">Thobias Trevisan</a>. Não que hoje esteja ruim, mas a patotinha se desfez.</p>
<p>Também em <strong>1999</strong> <a href="http://translationproject.org/domain/sed.html">traduzi o GNU Sed para português</a> e criei um cantinho para o Sed em minha recente “página da internet”, para concentrar informações sobre o programa, além de scripts que eu fazia. Essa área foi crescendo com o tempo, pois felizmente outras pessoas também começaram a traduzir documentos e escrever sobre o Sed. Hoje ela é <a href="http://aurelio.net/sed/">um portal que centraliza as informações em português sobre o Sed</a>.</p>
<p>Em <strong>2000</strong> escrevi o <a href="http://aurelio.net/sed/sed-HOWTO/">Sed HOWTO</a>, um documento completo sobre o programa, para tentar explicar como o Sed funciona. O formato HOWTO hoje cheira mofo, mas na época era popular, tá? :) Baseado nas dúvidas que apareciam na lista de discussão, fui montando o documento. O objetivo era desmistificar o Sed para o usuário novato, mostrando como as coisas funcionam. Eu queria ter lido um desses quando estava aprendendo :)</p>
<p>No Sed também estão as origens do <a href="http://txt2tags.org/pt/">txt2tags</a>, meu programa mais utilizado. A sua primeira versão era um script em Sed que se chamava <a href="http://aurelio.net/sed/programas/txt2sgml-sed/">txt2sgml.sed</a>. Só fiz esse programa porque eu queria escrever o Sed HOWTO já mencionado, mas os HOWTOs eram escritos em <a href="http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language">SGML</a>, uma linguagem tipo HTML, cheia de tags malas. Daí fiz o programinha em Sed para colocar essas tags automaticamente no meu texto. Viu como <a href="http://aurelio.net/blog/2008/05/10/uma-coisa-leva-a-outra/">uma coisa puxa a outra</a>? Se você gosta do txt2tags, agradeça ao Sed HOWTO :)</p>
<p style="text-align:center;"><a href="http://txt2tags.org/pt/"><img class="aligncenter" src="http://txt2tags.org/img/t2tpowered-white.png" alt="" width="88" height="31" /></a></p>
<p>Em <strong>2001</strong> fiz o programa <a href="http://aurelio.net/sedsed/">sedsed</a>. Deu muito, mas muito trabalho e este é um dos programas que eu mais me orgulho em ter feito. Porém, é um ilustre desconhecido… Antes mesmo de escrever qualquer código, fiquei dias pensando em como eu poderia “depurar” (debug) um script em Sed. A missão era embutir outros comandos Sed no meio do script, que sem alterar em nada a lógica do script original, ainda mostraria na tela o comando atual sendo executado e o conteúdo dos buffers (<a href="http://aurelio.net/sed/sed-HOWTO/sed-HOWTO-8.html#toc4">pattern e hold space</a>). O trabalho mental foi árduo, era uma cama de gato onde um comando que eu colocava para arrumar algo, estragava outra ponta. Muitos banhos quentes e protótipos depois, finalmente cheguei num modelo que conseguia depurar sem interferir. A maior emoção foi testar o mítico <a href="http://sed.sourceforge.net/local/scripts/dc.sed.html">dc.sed</a> (sim, a calculadora <a href="http://www.gnu.org/software/bc/manual/dc-1.05/html_mono/dc.html">dc</a> escrita em Sed) e ver o <a href="http://aurelio.net/sedsed/dc.png">4 + 4 virar 8</a> com a depuração ligada. Não tem preço.</p>
<div class="wp-caption aligncenter" style="width: 359px"><a href="http://aurelio.net/sedsed/dc.png"><img src="http://aurelio.net/sedsed/dc.png" alt="" width="349" height="376" /></a><p class="wp-caption-text">4 + 4 = 8, sabia? :)</p></div>
<p>Em <strong>2002</strong> posso dizer que foi meu auge com o Sed. Além de ganhar a batuta de administrador do <a href="http://sed.sourceforge.net">portal mundial do programa</a>, vi <a href="http://games.slashdot.org/story/02/03/21/0217219/SedSokoban">meu nome no maior site nerd da época</a>: o Slashdot. Mas o motivo foi meio frustrante para mim. Pra ver como as coisas são: o sedsed levou meses para ficar pronto e exigiu todo meu conhecimento de Sed, ao extremo. Mas o que me deixou “famoso” foi o trabalho de uma única noite: ter feito <a href="http://aurelio.net/sed/sokoban/sokoban.sed.html">o jogo Sokoban em Sed</a>. É aquele jogo simples de empurrar as caixinhas. Nada especial no jogo em si, mas como o Sed é um filtro de textos e não uma linguagem de programação, a dificuldade em fazer o jogo é que foi o grande chamariz. Algo como trocar um pneu de carro com um alicate. De bico. Dá pra fazer, mas dá muuuito trabalho :)</p>
<div class="wp-caption aligncenter" style="width: 345px"><a href="http://aurelio.net/soft/sedsokoban/shot.png"><img src="http://aurelio.net/soft/sedsokoban/shot.png" alt="" width="335" height="399" /></a><p class="wp-caption-text">Jogo Sokoban em Sed!</p></div>
<p>Em <strong>2002</strong> também comecei a escrever um <a href="http://aurelio.net/sed/livro/">livro sobre Sed</a>. Eu estava empolgado, devo ter feito mais da metade do livro, depois vários amigos da lista de discussão ajudaram revisando o texto. Mas não lembro porque agora, tive que parar a escrita por um tempo. Depois a chama nunca mais reacendeu… Frustrante :( Em 2005 liberei <a href="http://aurelio.net/sed/livro/DominandoSed.pdf">o PDF do livro</a>, inacabado mesmo, para não perder todo o trabalho que foi feito. Mas escrever um livro de Sed ainda faz parte dos meus desejos, e espero poder fazer isso logo.</p>
<p style="text-align:center;">————— ∞ —————</p>
<p>Bem, mas essa volta toda é para dizer que <a href="http://aurelio.net/sed/">o portal do Sed</a> foi reformado :)</p>
<p style="text-align:center;"><a href="http://aurelio.net/sed/"><img class="aligncenter" src="http://aurelio.net/img/icon/128/sed.png" alt="" width="128" height="128" /></a></p>
<p>Assim como <a href="http://aurelio.net/blog/2009/06/30/10anos-vim/">aconteceu com o portal do Vim</a>, agora é a vez do Sed participar das <a href="http://aurelio.net/blog/2009/06/27/10-anos-de-saite/">comemorações de 10 anos do meu site</a>. O portal entrou no formato novo, está mais limpo, confortável de ler e útil. Sem anúncios, sem menu sobrecarregado, sem frescurada que distrai.</p>
<p>No Vim você viu o <a href="http://aurelio.net/vim/pulando.html">formato novo dos artigos</a>. Agora gostaria que você avaliasse o <a href="http://aurelio.net/sed/">formato do portal</a>, que lista todas as informações sobre um assunto. Tem também o <a href="http://aurelio.net/sed/sed-HOWTO/">Sed HOWTO</a>, que além do formato novo ganhou uma atualização de conteúdo, indo para a versão 0.6.</p>
<p>Tá com tempo livre no final de semana? Sed nele! :)</p>
