---
author: aurelio
layout: twentyten-child
slug: garoto-de-programa
title: Garoto de programa
wordpress_id: 739
wp_categories:
- nerd
wp_tags:
- adiumbook
- blog
- dmg
- funcoes-zz
- mac-os-x
- mog
- programacao
- python
- rss
- sparkle
- svn
- txt2tags
- xcode
- zip
tags: [programador]
---


<p>Nossa, o blog está agitado nos últimos dias.</p>
<p>O <a href="http://aurelio.net/blog/2009/03/05/o-que-ta-acontecendo-com-o-aurelio/">texto anterior feito pela Mog</a> gerou uma avalanche de comentários! E legal que são vários assuntos acontecendo ao mesmo tempo, graças à novidade de poder responder a um comentário específico (basta clicar em “Responder”, ao lado da data). Como a resposta aparece logo após o comentário e não lá no final, fica fácil de acompanhar o bate-papo. Quer participar também? <a href="http://aurelio.net/blog/2009/03/05/o-que-ta-acontecendo-com-o-aurelio/#comments">Vai lá agora</a> e também <a href="http://feeds.feedburner.com/AurelioJargasComentarios">assine o feed de comentários</a>!</p>
<p>O que mais gostei foi da sinceridade e conteúdo de muitos dos comentários. <a href="http://aurelio.net/blog/2009/03/05/o-que-ta-acontecendo-com-o-aurelio/#comment-45658">Tomei um puxão de orelha</a> (aliás, vários) que estava precisando, afinal, o blog acabou ficando meio de lado nos últimos meses.</p>
<p>Mas em vez de desculpas e lamentações, prefiro acatar a vontade popular e… escrever. <strong>Você pediu, agora aguenta!</strong> :)</p>
<p>Então, vamos falar de nerdices. Hoje lancei <a href="http://aureliosoft.wordpress.com/2009/03/11/adiumbook-version-15/">uma versão nova</a> do programinha <a href="http://aurelio.net/soft/adiumbook/">AdiumBook</a>, que serve para organizar seus contatos no <a href="http://aurelio.net/mac/">Mac</a>. Mas esqueça o programa, ele não é importante agora. O que quero é falar sobre desenvolvimento de software. Olha só:</p>
<div id="attachment_747" class="wp-caption aligncenter" style="width: 310px"><a href="http://aurelio.net/wp/wp-content/uploads/2009/03/billable-adiumbook.jpg"><img class="size-medium wp-image-747" title="billable-adiumbook" src="http://aurelio.net/wp/wp-content/uploads/2009/03/billable-adiumbook.jpg?w=300" alt="billable-adiumbook" width="300" height="266" /></a><p class="wp-caption-text">Clique na foto para aumentar</p></div>
<blockquote><p>Dica: Faz o seguinte, abra essa imagem em uma nova janela e deixe à vista, pois todo o texto falará sobre ela. Assim vai ficar mais fácil de entender.</p></blockquote>
<p>Agora vem uns quatro parágrafos bem chatos, mas aguente firme que é necessário para acompanhar o resto do texto. Eu prometo que depois melhora, tá?</p>
<p>Esta é uma foto do programa <a href="http://clickablebliss.com/billable/">Billable</a>, que uso para contabilizar as horas que gasto em cada tarefa durante o trabalho. Ele tem um relojinho que eu disparo quando começo e depois paro no final. No lado esquerdo estão os projetos e na tabelinha estão as tarefas. As linhas em azul estão selecionadas. Então o que estamos vendo são as tarefas do projeto AdiumBook.</p>
<p>Dentro da tabela, selecionei apenas as tarefas mais recentes deste projeto, que mostram todo o trabalho feito nesta versão nova lançada hoje.</p>
<p>Aquele total em reais no canto direito da tabela indica o valor de cada tarefa. Mas eu coloquei o valor/hora como R$ 1,00 para ficar fácil ver a quantidade de horas de cada tarefa. Então um valor de R$ 2,50 na verdade indica que a tarefa demorou duas horas e meia para ficar pronta.</p>
<p>Eu também sempre arredondo o tempo de cada tarefa, usando intervalos de no mínimo 15 minutos. Assim fica melhor de ter uma visão geral das coisas, valores muito picadinhos apenas confundem.</p>
<p>Bem, mas então tá. Agora você já sabe achar as informações ali :)</p>
<p>Eu gosto de sempre analisar os dados sobre as coisas que faço, para avaliar se tudo correu bem e para poder tomar decisões para o futuro. Dessa vez quero fazer a análise junto com vocês, para mostrar um pouco como é essa <strong>rotina de ser programador e lançar programas</strong>.</p>
<p>Primeiro vamos às datas. A versão anterior do AdiumBook (1.4) foi lançada em 29 de julho de 2008. Tá lá, na primeira linha da tabela, que não está selecionada. Esse lançamento tomou quase oito horas para ficar pronto! Vejamos quais tarefas foram feitas neste dia:</p>
<ul>
<li>Testes no iBook (Tiger)</li>
<li>Atualização SVN</li>
<li>DMG feito</li>
<li>site atualizado</li>
<li>anúncio nos sites (Xtras, Apple, ScriptBuilders)</li>
<li>anúncio no blog do aurélio</li>
<li>anúncio no blog aureliosoft</li>
</ul>
<p>Nada de substancial, certo? Eu nunca diria que essas tarefinhas iriam levar oito horas… Mas cada uma tem vários passos a seguir e os famosos “5 minutinhos” acabam virando horas.</p>
<blockquote><p>A Mog, depois de um tempo comigo, instituiu a regra do “<strong>vezes dois</strong>” para os meus prazos. Cada vez que eu digo algo como “só vou levar mais meia hora para terminar esse texto do blog”, ela responde: “vezes dois”. E não dá outra: acabo levando pelo menos mais uma hora para terminar. Sabe o que é? Ou eu sou otimista demais nos meus prazos, ou o universo conspira para sempre dar alguma coisa errada no meio do caminho ;)</p></blockquote>
<p>O lançamento de hoje foi mais rápido, demorou apenas quatro horas. Já estou mais familiarizado com o <a href="http://code.google.com/p/adiumbook/source/checkout">SVN</a>, por preguiça não fiz os testes no <a href="http://www.apple.com/support/tiger/">Tiger</a> (sistema anterior, já antiquado) e o anúncio no blog é este texto que estou escrevendo agora, mas dessa vez contabilizando no projeto “Blog”. Vejamos, já deu uma hora e oito minutos até aqui. Será que conseguirei terminar em menos de três horas? Duvido :)</p>
<p><strong>Primeira lição</strong> que os dados nos ensinam: leva tempo!</p>
<p>O lançamento de uma versão nova de um programa não é feito em 15 minutos, nem em uma hora. É um processo trabalhoso e desgastante, onde você deve ter atenção máxima para não errar. Concentração é tudo.</p>
<blockquote><p>E cansa mesmo, mental e fisicamente. Hoje, logo que terminei o lançamento do AdiumBook fui tomar um banho para relaxar, pois estava acabado. O bom é que no banho tive a ideia de um <a href="http://aurelio.net/livro/">livro</a> sobre desenvolvimento de software, mas isso eu deixo para falar outro dia… :)</p></blockquote>
<p>Voltando à fotinho e à tabela, a segunda linha mostra que no dia seguinte ao lançamento da versão anterior, gastei somente uma hora e pouco fazendo faxina (todos = “to do”s, do inglês, a fazer) e cadastrando o programa no site <a href="http://freshmeat.net/projects/adiumbook">Freshmeat</a>. Nada glorioso, trabalho de peão.</p>
<p>Só fui mexer no programa novamente um mês depois, em agosto, que levei uma hora para arrumar alguns probleminhas que apareceram ao instalar a versão nova do <a href="http://adium.im/">Adium</a> (1.3).</p>
<p>Em setembro mexi mais uma única vez para resolver outro problema que os usuários relataram, que deu muito trabalho levando mais de cinco horas para resolver. E depois mais nada, esqueci do programa por vários meses.</p>
<blockquote><p>Eu gosto assim. Passar um bom tempo sem mexer no programa, que quando eu volto, a disposição é grande. Se mexer todo dia um pouquinho enche o saco rapidinho.</p></blockquote>
<p><strong>Segunda lição:<br />
</strong>Relaxe! Só mexa no programa quando tiver tempo e disposição.</p>
<p>Vieram as festas de fim de ano, a praia, o Carnaval, e nada de vontade de mexer no programa. Porém, os e-mails de usuários começaram a acumular e comecei a ficar incomodado. Geralmente é neste momento que decido que é “hora de fazer alguma coisa”.</p>
<blockquote><p>Ei, <a href="http://txt2tags.org/pt/">txt2tags</a>, estou olhando pra você.</p></blockquote>
<p>Depois que terminei as tarefas mais importantes do <a href="http://umportugues.com">UmPortugues</a>, me programei para “dar um jeito” no AdiumBook. Eu sabia que essa pegada iria resultar em uma versão nova, pois haviam muitas pendências a serem resolvidas. Então era preciso de bastante tempo reservado para poder mergulhar no código.</p>
<p>Aí começou o trabalho de verdade, no dia sete deste mês, sábado passado, num final de semana que excepcionalmente eu não iria ver a <a href="http://aurelio.net/tag/mog/">Mog</a>. Veja na foto as cinco últimas linhas selecionadas na tabela, que mostram cinco dias seguidos de trabalho no programa, de sábado até hoje.</p>
<p>Eu preciso dessa imersão quando tenho algo maior a fazer. Trabalhar meia hora por dia em uma coisa não dá certo. Eu levo esse tempo somente para me concentrar 100% e “mergulhar” no código. Sabe aquele estado de atenção em que você não sente fome nem vontade de ir ao banheiro? É isso :)</p>
<p><strong>Terceira lição:<br />
</strong> Prepare-se para trabalhar pesado quando for finalizar um programa para lançamento de versão nova.</p>
<p>Mas tive alguns problemas não planejados.</p>
<p>Dias atrás instalei o <a href="http://www.apple.com/safari/">Safari 4 Beta</a> e gostei que ele está mais rápido e consome menos memória (nem preciso mais encerrá-lo diariamente!). Porém, ele <a href="http://compgroups.net/comp.sys.mac.apps/safari-4-kills-xcode/195514">quebrou</a> o <a href="http://en.wikipedia.org/wiki/Xcode">Xcode</a>, que é o programa que uso para mexer no AdiumBook. Tive que atualizá-lo. Foram horas até os seus malditos 900 e poucos megas serem baixados pela minha conexão barata. Uma baita água fria em quem achava que já ia colocar a mão no código naquele momento.</p>
<p>Com o Xcode atualizado, o próximo que me deu dores de cabeça foi o <a href="http://sparkle.andymatuschak.org/">Sparkle</a>. Ele é um carinha muito bacana que você enfia no teu programa e ele faz a mágica da atualização automática. Funciona assim: a próxima vez que eu lançar uma versão nova do AdiumBook, vai aparecer automaticamente uma janelinha para o usuário, dizendo: “tem uma versão nova desse programa, quer baixar e instalar?” e então ele faz tudo sozinho. É lindo de ver. Mas… Levei horas para fazer ele funcionar. E nem posso xingar o carinha, pois o erro foi meu. A maneira que eu informava a versão do AdiumBook no Xcode estava errada. Arrumei isso e o Sparkle começou a funcionar. Coisas da vida…</p>
<div id="attachment_748" class="wp-caption aligncenter" style="width: 310px"><a href="http://aurelio.net/wp/wp-content/uploads/2009/03/sparkle-window.jpg"><img class="size-medium wp-image-748" title="sparkle-window" src="http://aurelio.net/wp/wp-content/uploads/2009/03/sparkle-window.jpg?w=300" alt="sparkle-window" width="300" height="200" /></a><p class="wp-caption-text">Janelinha do Sparkle atualizando o AdiumBook</p></div>
<blockquote><p>Estou há duas horas escrevendo esse texto já. Isso que nem revisei nada ainda. É, vai demorar…</p></blockquote>
<p>Já que fui forçado (para o bem) a mudar meu esquema de versões, resolvi por o número de revisão do SVN ali também, para ficar igual software de gente grande. A versão de lançamento ficou “1.5 (50)”, ou seja, <a href="http://code.google.com/p/adiumbook/source/browse/#svn/tags/1.5">versão 1.5</a>, <a href="http://code.google.com/p/adiumbook/source/detail?r=50#">revisão 50 do SVN</a>. Mas como eu não ia ficar mudando a revisão do SVN “na mão” a cada alteração, procurei uma maneira de fazer isso automaticamente. Achei <a href="http://blog.shinyfrog.net/2008/05/19/sync-svn-version-and-cfbundleversion-xcode/">um script em Python</a> que deu erro aqui mas consegui arrumar. No fim, todo esse problema acabou deixando o programa mais profissional e ainda pude automatizar a geração do ZIP para lançamento.</p>
<p>Ah é, o <a href="http://en.wikipedia.org/wiki/ZIP_(file_format)">ZIP</a>. Antes eu usava o formato <a href="http://en.wikipedia.org/wiki/Apple_Disk_Image">DMG</a> (Disk Image) para “empacotar” e distribuir o AdiumBook. Esse tal DMG é um treco que só tem no Mac. É bacana, imagine um arquivo ZIP que quando você abre aparece uma janelinha bonitinha, com desenhos, cores, tudo bem personalizado para o seu programa. Só que o Sparkle tem <a href="https://github.com/andymatuschak/Sparkle/wiki/Publishing-An-Update">algumas pegadinhas</a> para usar com o DMG. Então para simplificar as coisas para mim, mudei para o ZIP, que é mais padrão.</p>
<div id="attachment_746" class="wp-caption aligncenter" style="width: 310px"><a href="http://aurelio.net/wp/wp-content/uploads/2009/03/adium-dmg.jpg"><img class="size-medium wp-image-746" title="adium-dmg" src="http://aurelio.net/wp/wp-content/uploads/2009/03/adium-dmg.jpg?w=300" alt="adium-dmg" width="300" height="226" /></a><p class="wp-caption-text">O DMG do Adium é tãaaao bonitinho</p></div>
<p>Percebeu o tamanho das encrencas não-planejadas que aparecem quando você só quer mexer sossegado no seu programa e nada mais? Recapitulando: baixar e instalar o Xcode, Sparkle com problemas, mudar o esquema de versionamento, script para versão automática, mudar de DMG para ZIP. Por isso ocorre o “vezes dois”, que nesse caso foi um “vezes quatro” pelo menos :)</p>
<p><strong>Quarta lição:<br />
</strong> Prepare-se para enfrentar problemas inesperados. O ato de “programar” envolve muito mais do que sentar numa cadeira e digitar códigos. Ah, se não fosse o Google…</p>
<p>Bem, resolvidos estes contratempos, pude finalmente fazer aquilo que gosto: <a href="http://code.google.com/p/adiumbook/source/list">criar códigos</a>. E assim foram corrigidos os bugs e implementadas as funcionalidades novas.</p>
<blockquote><p>Se você quiser acompanhar “ao vivo” a evolução de um software, assine <a href="http://code.google.com/feeds/u/aureliojargas/updates/user/basic">meu feed no Google Code</a>. Assim você fica sabendo na hora sobre as mudanças mais recentes no AdiumBook, no txt2tags e nas <a href="http://funcoeszz.net">Funções ZZ</a>.</p></blockquote>
<p>Com tudo pronto, hoje atualizei <a href="http://code.google.com/p/adiumbook/source/browse/trunk/AdiumBook%20Help/index.html">o texto de ajuda</a> (Help), rodei o programa e testei todos os botões e itens de menu, fiz o <a href="http://adiumbook.googlecode.com/files/AdiumBook-1.5.zip">ZIP final</a> e mandei para o <a href="http://code.google.com/p/adiumbook/downloads/list">servidor</a>. Contemplei por alguns segundos o arquivo na tela, mostrando zero downloads. É o nascimento.</p>
<blockquote><p>Dá uma emoção ao enviar o arquivo, sabia? Uma vez no servidor, seu “filho” vai para o mundo. Ali é o ponto sem retorno, onde você declarou publicamente que fez o seu melhor. Encontrar uma falha logo após enviar o arquivo é motivo de vergonha para três gerações futuras de sua família.</p></blockquote>
<p>Depois foi aquela novela de atualizar o <a href="http://aurelio.net/soft/adiumbook/">site do programa</a>, atualizar o <a href="http://aurelio.net/soft/padfiles/adiumbook-pad.xml">arquivo PAD</a> e anunciar a versão nova para os principais sites de download. Vou colar aqui um pedaço do meu arquivo release-checklist.txt, que lista todas as tarefas obrigatórias de cada lançamento (em ordem de execução):</p>
<blockquote><p>———————-8&lt;——————————<br />
upload ZIP pro Google Code<br />
baixar ZIP e testar<br />
deprecate release anterior no Google Code<br />
atualizar Changelog no Google Code (wiki)<br />
atualizar issues (“closes issue #12” no Changelog)<br />
fazer Changelog mini (&lt;300) para PAD e sites<br />
screenshot novidades<br />
atualizar site<br />
atualizar appcast.xml (e changelog: 1.5.html)<br />
atualizar PAD file (editar, upload, validate, enviar repositório)<br />
atualizar no Adium Xtras http://www.adiumxtras.com/?a=xtras&amp;xtra_id=2069<br />
atualizar no ScriptBuilders (Upload your Scripts! &gt; Update Existing)<br />
atualizar no VersionTracker (MacUpdate segue, acho)<br />
atualizar no Freshmeat http://freshmeat.net/projects/adiumbook/<br />
atualizar no site da Apple https://adcweb.apple.com/downloads/<br />
atualizar no i use this (textile: listas com * e **)<br />
post blog aureliosoft<br />
post blog aurelio<br />
———————–&gt;8—————————–</p></blockquote>
<p>Ufa! Pensou que era fácil lançar um programa? :)</p>
<p><strong>Quinta lição:<br />
</strong>Codificar é divertido, lançar é estressante. Por isso não compensa fazer muitos lançamentos em um curto período.</p>
<p>De volta à foto, veja que logo abaixo das linhas azuis da tabela, há uma linha mostrando os números totais. Ali no meio é possível ver no item “Time-based” qual foi o tempo total que eu levei para fazer todas as tarefas dessa versão nova do programa: mais de 30 horas.</p>
<p>Pena que faz pouco tempo que eu comecei a contabilizar as horas do AdiumBook, mas como eu apanhei muito lá no início (em 2005) por não saber AppleScript direito, acredito que o total já investido nesse programa passa das 200 horas de trabalho.</p>
<p>Lembrando: o AdiumBook é um programa gratuito.</p>
<p>Se você me perguntar “<strong>por quê?</strong>“,<br />
eu respondo “<strong>porque vale a pena!</strong>“.</p>
