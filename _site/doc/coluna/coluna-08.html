<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    	<meta charset="utf-8">
	<title>coluna do aurelio 08: screen (janelizando o modo texto - parte 2) | Aurelio.net</title>

	<link rel="shortcut icon" href="/favicon.ico">
	<meta name="author" content="Aurelio Jargas">
	<meta name="generator" content="Jekyll">

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">


    <style>
      body {
        margin: 2em;
        background-color: black;
        color: silver;
        text-align: justify;
      }

      h1 {
        color: lightgreen;
      }

      h3 {
        color: green;
      }

      a {
        color: yellow;
        text-decoration: none;
      }

      a:visited {
        color: purple;
      }

      code {
        color: white;
        font-weight: bold;
      }

      pre {
        color: orange;
        margin-left: 2em;
      }

      .footer {
        padding-top: 1em;
        border-top: 1px solid silver;
      }
    </style>

    
	<!-- Google Analytics -->
	<script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	    ga('create', 'UA-280222-1', 'auto');
	    ga('send', 'pageview');
	</script>

  </head>

  <body>
    <h1>coluna do aurelio 08: screen (janelizando o modo texto - parte 2)</h1>
    <h3>https://aurelio.net/doc/coluna</h3>
    <h4>Escrito por Aurelio Jargas em 2001-05-10</h4>

    <p>olás. já estão apertando <code>^a</code> até no celular? ainda não? bem, então hoje eu vou mostrar porque sua vida será mais feliz com o <code>screen</code>.</p>

<p>comecemos com o simples e útil: monitoramento. quer ser informado quando algum usuário entrou na sua máquina, ou quando acabou aquele comando demorado? o comando de monitoramento emite um aviso quando qualquer coisa muda na janela, como linhas ou caracteres novos. na janela do comando em questão <code>^a :monitor on</code>. comandos candidatos a monitoramento são: <code>tail -f</code>, <code>tar czf</code>, <code>comando &gt; arquivo</code> ou qualquer outro comando que não produza saída na tela por algum tempo e que quando é finalizado simplesmente retorna à linha de comando.</p>

<p>o inverso também é possível: monitorar o silêncio. o comando para tal é o <code>^a :silence 10</code>, sendo 10 o número de segundos de monitoração. se durante esse tempo nada mudar na tela, um aviso será emitido na sua barra de tarefas. ótimo para detectar falhas em programas que não podem parar.</p>

<p>de longe minha funcionalidade preferida é a de copiar e colar textos entre janelas sem precisar do mouse. como é mesmo um mouse? &amp;:) o <code>screen</code> lhe permite selecionar visualmente um texto utilizando apenas o teclado. numa primeira tentativa pode parecer complicado, mas é simples. pra variar, começa com <code>^a</code>. veja no seu teclado, as teclas <code>[</code> e <code>]</code>. viu? olhe de novo, fixamente, como quem acaba de conhecer um amigo novo e se entenda com elas, pois você passará a utilizá-las muito, serão inseparáveis. bem, talvez nem tanto, mas use, tente e seja mais um feliz usuário do <code>screen</code> que jogou seu mouse pela janela e nunca mais sofreu de dores no pulso. sua saúde agradece.</p>

<p>espero que toda essa propaganda lhe faça "ver a luz", o nirvana do teclado, retomando seu reinado roubado pelo mouse famigerado. acompanhe: temos o colchete que abre e o que fecha, um copia e o outro cola. só isso. então, numa janela do <code>screen</code> digite <code>^a [</code> para entrar no modo de cópia ("copy mode") e com as <code>setas</code> do teclado, vá com o cursor até o início do trecho a ser copiado. agora para marcar que ali é o começo da seleção, simplesmente aperte a <code>barra de espaços</code> e veja a seleção visual começar. novamente com as <code>setas</code> direcione o cursor até o fim do trecho desejado e vá vendo o texto ficando marcado. marcou tudo o que queria? novamente aperte a <code>barra de espaços</code> para informar que a seleção acabou. pronto, o trecho foi copiado e o <code>screen</code> voltou para seu estado normal. opcionalmente você pode usar a tecla <code>ENTER</code> ao invés da <code>barra de espaços</code>.</p>

<p>para colar o trecho copiado, seja na linha de comando, no navegador ou no seu editor de textos preferido, simplesmente aperte <code>^a ]</code>. essa cópia e colagem é independente de aplicação, você pode selecionar qualquer trecho da tela, seja texto, seja um menu ou a tela inteira. e nesse intervalo entre copiar o trecho e colá-lo, você pode trocar de janela normalmente, executar outros comandos, até esquecer que tinha copiado algo, e quando apertar <code>^a ]</code>, lá estará seu texto, intocado.</p>

<p>recapitulando: para copiar, <code>^a [</code>, move cursor, espaço, move cursor, espaço e para colar basta o <code>^a ]</code>.</p>

<p>para alegria dos usuários de <code>vi</code>, quando se está no modo de cópia vários atalhos conhecidos de movimentação funcionam, como: <code>0</code>, <code>$</code>, <code>w</code>, <code>G</code> e <code>g</code>, bem como os comandos de pesquisa <code>/</code> e <code>?</code>. isso mesmo! você pode procurar por palavras na tela estando no modo de cópia. então se numa listagem grande de nomes que está na tela, seja num programa de cadastro, no navegador ou foi a saída de um programa, você quer encontrar seu nome, basta digitar <code>^a [ ? seu_nome</code>. matador.</p>

<p>outra funcionalidade muito útil é o bipe visual. quando você está com muitos aplicativos abertos, por exemplo um leitor de e-mail, um de ICQ e outro de IRC e de repente sua máquina bipa, qual será o programa que o gerou? será um e-mail novo, ou uma mensagem privada no IRC? ou ainda, você está se batendo no <code>vi</code> e ele não pára de apitar e mostrar para todos em volta que você está errando? <code>^a :vbell on</code> é a solução. ao invés do bipe, sua tela irá dar uma piscada discreta, e caso o bipe veio de uma outra janela, você será avisado em sua barra de tarefas que a janela "nome-da-janela" está bipando. eu sei, "bipar" é feio. mas "clicar" também é...</p>

<p>você também pode criar seus próprios "atalhos" para disparar programas ou comandos rotineiros. atalhos são coisas que os "ícones" substituíram na interface gráfica, pois são mais "fáceis"... um atalho bem útil é um que abra uma janela nova com seu navegador preferido, já mostrando seus endereços preferidos (os marcadores, ou "bookmarks"). um comando como <code>^a :bind L screen -t www lynx -book</code> mapeia a tecla <code>L</code> para abrir uma janela nomeada "www" e executar nela o <code>lynx</code>. então você está em qualquer janela, fazendo o que quer que seja e precisou acessar uma página da internet? <code>^a L</code>. viu a página e não quer mais navegar? basta sair do <code>lynx</code> e a janela será fechada automaticamente. fácil assim.</p>

<p>ainda tem mais! não é um saco ter que ficar toda hora preenchendo seu nome e email em programas, formulários online, cadastros, registros, etc? o <code>screen</code> também resolve este problema, pois você pode mapear uma tecla para "cuspir" um texto na tela. captou?</p>

<p>por exemplo, com o <code>^a :bind N stuff "aurelio marinho jargas"</code>, quando preciso preencher meu nome, simplesmente faço <code>^a N</code>. e ainda, o conteúdo desse comando <code>stuff</code> pode ser uma variável de ambiente do <code>shell</code>, então se você já tem uma variável <code>$EMAIL</code>, mapeie o <code>E</code> para "cuspir" seu conteúdo: <code>^a :bind E stuff $EMAIL</code>. só cuidado na hora de escolher as teclas que farão estes atalhos para não pegar uma letra que é algum comando do <code>screen</code> que você utilize com o <code>c</code> por exemplo. letras maiúsculas são uma boa dica.</p>

<p>como o <code>screen</code> tem muitos comandos e configurações, você pode colocar suas preferências num arquivo no seu "home", o <code>~/.screenrc</code>. todos os comandos que vimos que começam com <code>:</code> podem ser colocados neste arquivo, e serão sempre carregados, não precisando ficar os digitando toda vez que entra no <code>screen</code>. o que é sempre a melhor escolha para começar um arquivo de configuração é pegar um pronto e modificá-lo para suas necessidades. o meu está disponível e comentado para facilitar o entendimento: <a href="/doc/dotfiles/screenrc.txt">https://aurelio.net/doc/dotfiles/screenrc.txt</a>. baixe-o e copie para <code>~/.screenrc</code>.</p>

<p>e vamos terminar falando mal, pois nenhum programa é perfeito. então os maiores incovenientes do <code>screen</code>, que nem de longe atrapalham seu uso em face de todas as vantagens que ele lhe oferece, são: a função de travar as janelas (<code>^a x</code>) às vezes se perde e bagunça o terminal, o <code>Shift+PageUp</code> para ver as telas que passaram não funciona com a barra de tarefas permanente (<code>:hardstatus alwayslastline</code>) e alguns programas se perdem com o tipo do terminal usado (<code>TERM=screen</code>). as soluções para estes probleminhas são, respectivamente: comando <code>reset</code> para arrumar o terminal, não usar a barra de tarefas permanente se quiser histórico e <code>export TERM=linux</code> se um programa não gostar do terminal.</p>

<p>e para pensar na cama: "por quê você precisa do CAPS LOCK?".</p>

<p>a tecla <code>CAPS LOCK</code> atrapalha estando ao lado da tecla <code>a</code>, que é nossa tecla chave do <code>screen</code>. esbarrar nela sem querer ao pressionar o <code>^a</code> é normal, e chato. mas pense bem. você usa o <code>CAPS LOCK</code>? ESCREVER EM MAIÚSCULAS é um hábito repugnante e geralmente são tão poucas as vezes que se precisa escrever uma palavra inteira ou mais em maiúsculas que ficar segurando o <code>Shift</code> com o mindinho é mais rápido que ligar e desligar o <code>CAPS LOCK</code>. e se precisar escrever um texto em maiúsculas, qualquer editor de texto decente tem a função de "capitalizar" um texto selecionado. isso fora o inconveniente de ligar a tecla sem perceber e digitar trechos ou executar comandos em maiúsculas sem querer. bem, concluindo eu aconselho a remoção física do <code>CAPS LOCK</code> do seu teclado. basta puxá-la para cima, arrancando-a e tapar o buraco com um durex. eu já fiz isso há mais de um ano e minha vida ficou mais feliz &amp;:)</p>


    <p class="footer">
      <a href="/doc/coluna/">&lt;--- Voltar para o índice</a>
    </p>
  </body>
</html>
