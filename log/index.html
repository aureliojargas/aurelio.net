<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<!--
	
	Esta é uma versão modificada do Moneylog Experience versão 3
	
  	****************************************************************
	***                                                          ***
	***   DO NOT EDIT THIS FILE IN MS WORD, use Notepad          ***
	***   More info at http://aurelio.net/projects/moneylog          ***
	***                                                          ***
	***   NÃO EDITE ESTE ARQUIVO NO WORD, use o Bloco de Notas   ***
	***   Mais informações em http://aurelio.net/moneylog        ***
	***                                                          ***
	****************************************************************

MoneyLog Experience ³
=====================

	MoneyLog Experience is a one-file finances reporter.

	O MoneyLog Experience é um gerador de extratos em um único arquivo.

Author/Autor:
 	Aurelio Jargas (www.aurelio.net)

History/Histórico:
 	v1: Jun-Jul 2006
 	v2: Jan-Feb 2007 (english version on May/2007)
 	v3: Oct-Dec 2007

License/Licença:
	BSD - http://en.wikipedia.org/wiki/BSD_license

-->

<head><title>Changelog NERD do Aurelio</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="author" content="Aurelio Marinho Jargas www.aurelio.net">

<!--
All the page formatting is here.
You may change the styles if you know what you're doing.
-->
<style type="text/css">
body { color:#333; background:#fff url(/img/avatar-alpha.png) no-repeat left bottom fixed; margin:0; padding:0; border:0; overflow:scroll; font-size:85%; font-family:sans-serif }
a { text-decoration:none; font-weight:bold }
#toolbar { color:lime; background-color:#000; text-align:center; z-index:1; position:fixed; top:0; left:0; width:100%; height:6em; padding-top:.3em; font-weight:bold; }
#toolbar a { float:left; color:lime; font-variant:small-caps; font-size:185%; padding:0 4px }
#toolbar a.helplink { float:right }
#toolbar h1 { display:inline; float:left; margin-top:7px; padding-top:0;}
#toolbar #filterbox { float:right; text-align:left }
#checkboxes { width:20em; margin:auto; text-align:left }
#content { z-index:0; margin-top:5em }
#tagsArea { float:left; background-color:#AFA; color:#222; padding:1.5em 0.5em 0.5em 0.5em; border:1px solid #fff; border-width:5px 1px 1px 0; display:none }
#tagsArea p { margin:0.5em 0; padding:0 }
#tagsArea input { margin:0; padding:0 }
#tagsArea #tagList { Xclear:both; padding-right:1em }
#tagsArea #tagMultiAll { display:none; } /* not used */
#report { text-align:center; padding:3em 0 }
#help { background-color:#edf; color:#515; padding:2em; margin:0; display:none }
#data { display:none }
table { margin:0 auto; border-spacing:0; border-collapse:collapse }
td { border:1px solid #ccc; padding:.1em 10px; font-size:85% }
td.row-count { text-align:center; font-size:70%; color:#aaa; border-width:0; background-color:#fff }
td.date { white-space:nowrap }
td.tags { white-space:nowrap }
tr.future td.row-count { font-style:normal }
th { text-align:center; font-size:85%; cursor:pointer }
th:hover { color:#000; background-color:#eee }
tr:hover td { background-color: #AFA }
tr.future { background-color:#eee; font-style:italic }
tr.average { background-color:#AFA; font-style:italic }
tr.monthtotal { background-color:#ddd; line-height:50%; text-align:right }
tr.monthtotal td { border-width:0; font-size:100% }
.trigger { cursor:pointer }
.number { text-align:center; white-space:nowrap }
.neg { color:#e33 }
tr.monthtotal td td.mini { font-size:75%; color:#868 }
table.monthsubtotal { margin:0 }
table.monthsubtotal td { padding:0; width:5.5em }
#footer { padding: 25px 0 25px 55px; }
#optoverview, #optoverviewlabel { display:none; }

/* Emulating position:fixed in IE/Win 5+ */
#toolbar { _position:absolute; _top:expression(eval(document.body.scrollTop)) }

</style>

<script type="text/javascript">
/*********************************************************************
* User Config
* -----------
*
* There is no need to change *anything*, but if you have special
* needs, here is the place to customize this script.
*
*********************************************************************/
// Program interface
var lang = 'pt';                  // 'pt' or 'en' for Portuguese or English
var maxLastMonths = 24;           // Number of months on the last months combo
var initLastMonths = 12;           // Initial value for last months combo
var defaultOverview = false;      // Init in Overview mode?
var defaultLastMonths = false;    // Last months combo inits checked?
var defaultMonthPartials = true;  // Monthly checkbox inits checked?
var defaultRegex = false;         // Search regex checkbox inits checked?
var defaultNegate = false;        // Search negate checkbox inits checked?
var defaultSearch = '';           // Search for this text on init
var showRowCount = true;          // Show the row numbers at left?
var monthlyRowCount = true;       // The row numbers are reset each month?
// Data format
var dataFieldSeparator = '\t';
var dataRecordSeparator = /[\n\r]+/;
var dataTagTerminator = '|';
var dataTagSeparator = ',';
var commentChar = '#';   // Must be at line start (column 1)
// Screen Labels
if (lang == 'pt') {
	var labelOverview = 'Relatório Geral';
	var labelLastMonths = 'Somente Recentes:';
	var labelMonthly = 'Mostrar Linha Divisória Anual';
	var labelNoData = 'Nenhum lançamento.';
	var labelsDetailed = ['Data','Versão','Programa / Doc','Mudanças / Descrição'];
	var labelsOverview = ['Mês','Ganhos','Gastos','Saldo','Acumulado'];
	var labelAverage = 'Média';
	var labelMonths = ['mês', 'meses'];
	var labelRegex = ['regex'];
	var labelNegate = ['excluir'];
	var centsSeparator = ',';
	var thousandSeparator = '.';
} else {
	var labelOverview = 'Overview';
	var labelLastMonths = 'Recent Only:';
	var labelMonthly = 'Show Monthly Partials';
	var labelNoData = 'No data.';
	var labelsDetailed = ['Date','Amount','Tags','Description'];
	var labelsOverview = ['Month','Incoming','Expense','Partial','Balance'];
	var labelAverage = 'Average';
	var labelMonths = ['month', 'months'];
	var labelRegex = ['regex'];
	var labelNegate = ['negate'];
	// Screen separators (Inside data both , and . are handled automatically)
	var centsSeparator = '.';
	var thousandSeparator = ',';
}
// End of user Config


var sortColIndex = 0;
var sortColRev = false;
var oldSortColIndex;
var currentDate;
var overviewData = [];

if (!Array.prototype.push) { // IE5...
	Array.prototype.push = function(item) {
		this[this.length] = item; return this.length; }
}
if (!Number.prototype.toFixed) { // IE5...
	Number.prototype.toFixed = function(n) { // precision hardcoded to 2
		var k = (Math.round(this * 100) / 100).toString();
		k += (k.indexOf('.') == -1)? '.00' : '00';
		return k.substring(0, k.indexOf('.') + 3); }
}
String.prototype.strip = function() {
	return this.replace(/^\s+/, '').replace(/\s+$/, '');
}
Array.prototype.hasItem = function(item) {
	for (var i = 0; i < this.length; i++) {
		if (item == this[i]) { return true; }
	}
	return false;
}
Array.prototype.removePattern = function(patt) {
	cleaned = [];
	for (var i = 0; i < this.length; i++) {
		if (this[i] != patt) { cleaned.push(this[i]); }
	}
	return cleaned;
}

function sortCol(index, isOverview) { // if the same, flip reverse state
	sortColRev = (sortColIndex == index) ? sortColRev ^= true : false;
	sortColIndex = index;
	showReport();
}
function sortArray(a,b)  {
	a = a[sortColIndex]; b = b[sortColIndex];
	try {
		if (sortColIndex == 2) { a = a.toLowerCase(); b = b.toLowerCase(); }
	} catch(e) { }
	try { // IE6...
		if (a < b) { return -1; } else if (a > b) { return 1; }
	} catch(e) { }
	return 0;
}
function sortIgnoreCase(a,b) {
	try {
		a = a.toLowerCase();
		b = b.toLowerCase();
	} catch(e) { }
	try { // IE6...
		if (a < b) { return -1; } else if (a > b) { return 1; }
	} catch(e) { }
	return 0;	
}
function setCurrentDate() {
	var z = new Date();
	var m = z.getMonth()+1, d = z.getDate();
	m = (m < 10) ? '0'+m : m; d = (d < 10) ? '0'+d : d;
	currentDate = z.getFullYear() +'-'+ m +'-'+ d;
}
function getPastMonth(months) {
	var z = new Date();
	var m = z.getMonth()+1 - months; // zero based
	var y = z.getFullYear();
	if (m < 1) { m = 12 + m; y = y - 1; } // past year
	m = (m < 10) ? '0'+m : m;
	return y + '-' + m + '-' + '00';
}
function prettyFloat(num, noHtml) {
	// var myClass = (num < 0) ? 'neg' : 'pos';
	var myClass = 'pos';
	// num = num.toFixed(2).replace('.', centsSeparator);
	// while (thousandSeparator && num.search(/[0-9]{4}/) > -1) {
	// 	num = num.replace(/([0-9])([0-9]{3})([^0-9])/,
	// 		'$1'+thousandSeparator+'$2$3');
	// }
	return (noHtml) ? num : '<span class="'+myClass+'">'+num+'<\/span>';
	// Note: all html *end* tags have the / escaped to pass on validator
}
function populateMonthsCombo() {
	var el = document.getElementById('lastmonths');
	var label = labelMonths[0];
	for (var i=1; i <= maxLastMonths; i++) {
		if (i > 1) { label = labelMonths[1]; }
		el.options[i-1] = new Option(i + ' '+label, i);
	}
	el.selectedIndex = (initLastMonths > 0) ? initLastMonths-1 : 0;
}
function getTotalsRow(total, monthTotal, monthNeg, monthPos) {
	if (monthTotal) {
		var partial = new Array();
		partial.push('<table class="monthsubtotal number" align="right"><tr>');
		partial.push('<td class="mini"> +');
		partial.push(prettyFloat(monthPos, true) + '<br>');
		partial.push(prettyFloat(monthNeg, true) + '<\/td>');
		partial.push('<td>' + prettyFloat(monthTotal) + '<\/td>');
		partial.push('<\/tr><\/table>');
		partial = partial.join('');
	} else {
		var partial = '';
	}
	var theRow = '<tr class="monthtotal">';
	if (showRowCount) {
		theRow += '<td class="row-count"><\/td>';
	}
	theRow += '<td><\/td>';
	// theRow += '<td class="number">'+prettyFloat(total)+'<\/td>';
	theRow += '<td class="number">'+total+'<\/td>';
	theRow += '<td colspan="2">'+partial+'<\/td><\/tr>';
	return theRow;
}
function getOverviewRow(theMonth, monthPos, monthNeg, monthTotal, theTotal) {
	var theRow = new Array();
	theRow.push((theMonth <= currentDate.slice(0,7)) ? '<tr>' : '<tr class="future">');
	theRow.push('<td>'+theMonth+'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(monthPos)  +'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(monthNeg)  +'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(monthTotal)+'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(theTotal)  +'<\/td>');
	theRow.push('<\/tr>');
	return theRow.join('\n');
}
function getOverviewAverageRow(avgPos, avgNeg, avgTotal) {
	var theRow = new Array();
	theRow.push('<tr class="average">');
	theRow.push('<td>'+labelAverage+'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(avgPos)  +'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(avgNeg)  +'<\/td>');
	theRow.push('<td class="number">'+prettyFloat(avgTotal)+'<\/td>');
	theRow.push('<td><\/td>');
	theRow.push('<\/tr>');
	return theRow.join('\n');
}
function toggleMonthly() {
	if (document.getElementById('optmonthly').checked == true) {
		sortColIndex = 0;
		sortColRev = false;
	}
	showReport();
}
function toggleHelp() {
	//var el = document.getElementById('help');
	//el.style.display = (el.style.display == 'block') ? 'none' : 'block';
}
function toggleOverview() {
	// When active, hide all the controls from the toolbar and also the tags
	if (document.getElementById('optoverview').checked == true) {
		document.getElementById('filterbox'      ).style.visibility = 'hidden';
		document.getElementById('optmonthly'     ).style.visibility = 'hidden';
		document.getElementById('optmonthlylabel').style.visibility = 'hidden';
		document.getElementById('tagsArea'       ).style.display = 'none';
		oldSortColIndex = sortColIndex; // save state
		sortColIndex = 0; // Default by date
	} else {
		document.getElementById('filterbox'      ).style.visibility = '';
		document.getElementById('optmonthly'     ).style.visibility = '';
		document.getElementById('optmonthlylabel').style.visibility = '';
		document.getElementById('tagsArea'       ).style.display = 'block';
		sortColIndex = oldSortColIndex;
		overviewData = [];
	}
	showReport();
}
function toggleLastMonths() {
	overviewData = [];
	showReport();
}
function lastMonthsChanged(elem) {
	document.getElementById('optlastmonths').checked = true;
	overviewData = [];
	showReport();
}
function readData() {
	var temp;
	var isRegex = false;
	var isNegated = false;
	var filter = '';
	var firstDate = 0;
	var rowDate, rowAmount, rowText;
	var rowTagsDescription, rowTags, rowDescription;
	var theData = new Array();
	var rawData = document.getElementById('data').innerHTML.split(dataRecordSeparator);

	if (document.getElementById('optlastmonths').checked) {
		firstDate = getPastMonth(document.getElementById('lastmonths').value-1);
	}
	
	// Get filters data for the detailed report
	if (!document.getElementById('optoverview').checked) {
		filter = document.getElementById('filter').value;
		isRegex = document.getElementById('optregex').checked;
		isNegated = document.getElementById('optnegate').checked;
	}
	
	// Prepare filter contents as /regex/ or string, always ignore case
	if (filter) {
		if (isRegex) {
			filter = eval('/'+filter.replace('/', '\\/')+'/i');
		} else {
			filter = filter.toLowerCase();
		}
	}

	// Scan data rows
	for (var i = 0; i < rawData.length; i++) {

		// Skip commented rows
		if (rawData[i].indexOf(commentChar) == 0) continue;
		// Skip rows with no separator
		if (rawData[i].indexOf(dataFieldSeparator) == -1) continue;
		
		// Filter firewall - Will this line pass it?
		if (filter) {
			if (isRegex) {
				filterPassed = filter.test(rawData[i]);
			} else {
				filterPassed = (rawData[i].toLowerCase().indexOf(filter) != -1);
			}
			if ((!filterPassed && !isNegated) || (filterPassed && isNegated)) continue;
		}

		// Parse row data
		temp = rawData[i].split(dataFieldSeparator);
		while (temp.length < 3) { temp.push(''); } // Force 3 items
		rowDate   = temp[0];
		rowAmount = temp[1].strip(); // || '0';
		rowText   = temp[2].strip();
		
		// Normalize Date
		rowDate = rowDate.replace(/[^0-9-]/, '') || '-';
		if (rowDate < firstDate) continue; // last N months

		// Normalize Value (force '.' as scale separator)
		// rowAmount = parseFloat(rowAmount.replace(/[.,]([0-9][0-9])$/, '@$1'
		// 	).replace(/[^0-9@+-]/g, ''
		// 	).replace('@', '.'));

		// Normalize Description/Tags
		if (rowText.indexOf(dataTagTerminator) != -1) {
			// Get tags
			// FIXME: Can't handle more than one separator
			rowTagsDescription = rowText.split(dataTagTerminator);
			rowTags        = rowTagsDescription[0].split(dataTagSeparator);
			rowDescription = rowTagsDescription[1].strip();
			
			// Strip all tags
			for (var j = 0; j < rowTags.length; j++) {
				rowTags[j] = rowTags[j].strip();
			}
			rowTags = rowTags.removePattern('');
		} else {
			rowTags = [];
			rowDescription = rowText || '&nbsp;';
		}
		
		// Save the parsed data
		theData.push([rowDate, rowAmount, rowTags, rowDescription]);
	}
	
	return theData;
}
function applyTags(theData) {
	// This function composes the full tag menu and
	//also filters theData if some tag is selected
	
	var rowTags;
	var tagCount, tagElement;
	var tagsMenu = [];
	var selectedTags = [];
	var filteredData = [];
	
	// Get multiple selection mode (true=AND, false=OR)
	var tagMultiAll = document.getElementById('tagMultiAllCheck').checked;
	
	// Get currently selected tags (from interface)
	try {
		tagCount = document.getElementById('tagCount').value;
		for (var i = 1; i <= tagCount; i++) {
			tagElement = document.getElementById('tag_'+i);
			if (tagElement && tagElement.checked) {
				selectedTags.push(tagElement.value);
			}
		}
	} catch(e) { }
	
	// Filter data to match current tags
	for (var i = 0; i < theData.length; i++) {
		
		// rowDate, rowAmount, rowTags, rowDescription
		rowTags = theData[i][2];
		
		// Populate tags array with UNIQUE row tags
		for (var j = 0; j < rowTags.length; j++) {
			if (!tagsMenu.hasItem(rowTags[j])) {
				tagsMenu.push(rowTags[j]);
			}
		}

		// Tag Filter is active. This line matches it?
		if (selectedTags.length > 0) {
		
			for (var j = 0; j < selectedTags.length; j++) {

				var thisTag = selectedTags[j];
				var tagMatched = (rowTags.hasItem(thisTag) ||
					(thisTag == ' ' && rowTags.length == 0));
					// Tip: space means no tag
				
				if (tagMatched && (!tagMultiAll)) break; // OR
				if (!tagMatched && (tagMultiAll)) break; // AND
			}
			if (tagMatched) {
				filteredData.push(theData[i]);
			}
		}
	}
	
	// Make sure the menu has all the selected tags
	for (var i = 0; i < selectedTags.length; i++) {
		if (!tagsMenu.hasItem(selectedTags[i]) && selectedTags[i] != ' ') {
			tagsMenu.push(selectedTags[i]);
		}
	}

	// Compose the tags menu HTML code (if we have at least one tag)
	if (tagsMenu.length > 0) {
		
		// Sorted tags are nice
		tagsMenu.sort(sortIgnoreCase);
		// Add a last ' ' item to match the rows with no tag
		// tagsMenu.push(' ');
		
		// Save the total tag count
		document.getElementById('tagCount').value = tagsMenu.length;
		
		// Add one checkbox for each tag
		for (var i = 0; i < tagsMenu.length; i++) {
			tagName = tagsMenu[i];
			tagId = 'tag_' + (i+1)
			
			// Selected tags remain selected
			checked = selectedTags.hasItem(tagName) ? 'checked="checked"' : ''
			
			// The ugly code (but better than DOM-walking nightmares)
			tagsMenu[i] = '<input type="checkbox" class="trigger" onClick="showReport()" ' +
				checked + ' id="'+tagId+'" value="'+tagName+'">'+
				'<span class="trigger" onClick="document.getElementById(\''+tagId+'\').click()">&nbsp;'+tagName+'<\/span>';
		}

		// One tag per line
		tagsMenu = tagsMenu.join('<br>\n');
	}
	
	// Save the tags menu (or make it empty)
	document.getElementById('tagList').innerHTML = tagsMenu;
	
	// Show the tags menu if we have at least one tag
	document.getElementById('tagsArea').style.display = (
		tagsMenu.length > 0) ? 'block' : 'none';

	// The '+' checkbox is only shown if we have multiple selected tags
	// document.getElementById('tagMultiAll').style.display = (
	// 	selectedTags.length > 1) ? 'inline' : 'none';

	// Tag filter was active?
	if (selectedTags.length > 0) {
		return filteredData;
	} else {
		return theData;
	}
}
function showOverview() {
	var theData, thead, thisMonth, results = [];
	var theTotal = 0, monthTotal = 0, monthPos = 0, monthNeg = 0;
	var sumPos = 0, sumNeg = 0, sumTotal = 0;
	var currSortIndex = sortColIndex;

	// Table headings
	thead = '<th onClick="sortCol(0, true)">'+labelsOverview[0]+'<\/th>';
	thead+= '<th onClick="sortCol(1, true)">'+labelsOverview[1]+'<\/th>';
	thead+= '<th onClick="sortCol(2, true)">'+labelsOverview[2]+'<\/th>';
	thead+= '<th onClick="sortCol(3, true)">'+labelsOverview[3]+'<\/th>';
	thead+= '<th onClick="sortCol(4, true)">'+labelsOverview[4]+'<\/th>';

	if (!overviewData.length) { // Data not cached
		theData = readData();
		sortColIndex = 0; // Always scan by date order
		theData.sort(sortArray);
	}

	if (overviewData.length || theData.length) {
		results.push('<table>');
		results.push('<tr>' + thead + '<\/tr>');

		if (!overviewData.length) { // Scan and calculate
			for (var i = 0; i < theData.length; i++) {
				rowDate        = theData[i][0];
				rowAmount      = theData[i][1];
				// rowTags        = theData[i][2];
				// rowDescription = theData[i][3];
				
				if (i == 0) { thisMonth = rowDate.slice(0,7); }
				if (i > 0 &&
					rowDate.slice(0,7) !=
					theData[i-1][0].slice(0,7)) { //new month
					overviewData.push([thisMonth, monthPos, monthNeg, monthTotal, theTotal]);
					monthTotal = 0;
					monthPos = 0;
					monthNeg = 0;
					thisMonth = rowDate.slice(0,7);
				}
				theTotal += rowAmount;
				monthTotal += rowAmount;
				if (rowAmount < 0) {
					monthNeg += rowAmount;
				} else {
					monthPos += rowAmount;
				}
			}
			overviewData.push([thisMonth, monthPos, monthNeg, monthTotal, theTotal]);
		}
		sortColIndex = currSortIndex;
		overviewData.sort(sortArray);
		if (sortColRev) { overviewData.reverse(); }
		for (var i = 0; i < overviewData.length; i++) { // Array2Html
			z = overviewData[i];
			sumPos   += z[1];
			sumNeg   += z[2];
			sumTotal += z[3];
			results.push(getOverviewRow(z[0], z[1], z[2], z[3], z[4]));
		}
		var len = overviewData.length;
		results.push(getOverviewAverageRow(sumPos/len, sumNeg/len, sumTotal/len));
		results.push('<\/table>');
		results = results.join('\n');
	}
	else {
		results = labelNoData;
	}
	document.getElementById('report').innerHTML = results;
}

function showDetailed() {
	var thead;
	var theTotal = 0, monthTotal = 0;
	var monthPos = 0, monthNeg = 0;
	var rowCount = 0;
	var results = [];
	
	var monthPartials = document.getElementById('optmonthly');
	var theData = applyTags(readData());
	
	if (theData.length > 0) {

		// Data sorting procedures
		if (sortColIndex != 0 || sortColRev) {
			monthPartials.checked = false;
		}
		theData.sort(sortArray);
		if (sortColRev) { theData.reverse(); }

		// Compose table headings
		thead = '<th onClick="sortCol(0)">' + labelsDetailed[0] + '<\/th>';
		thead+= '<th onClick="sortCol(1)">' + labelsDetailed[1] + '<\/th>';
		thead+= '<th onClick="sortCol(2)" class="tags">' + labelsDetailed[2] + '<\/th>';
		thead+= '<th onClick="sortCol(3)">' + labelsDetailed[3] + '<\/th>';
		if (showRowCount) {
			thead = '<th class="row-count"><\/th>' + thead;
		}
		results.push('<table>');
		results.push('<tr>' + thead + '<\/tr>');

		// Compose table rows
		for (var i = 0; i < theData.length; i++) {
			
			rowDate        = theData[i][0];
			rowAmount      = theData[i][1];
			rowTags        = theData[i][2];
			rowDescription = theData[i][3];
			rowCount      += 1;
			
			// This row starts a new month? Must we show the partials?
			if (monthPartials.checked && i > 0 &&
				rowDate.slice(0,4) !=
				theData[i-1][0].slice(0,4)) {
				// results.push(getTotalsRow(theTotal, monthTotal, monthNeg, monthPos));
				results.push(getTotalsRow('&nbsp;'));
				// Partials row shown, reset month totals
				monthTotal = 0;
				monthPos = 0;
				monthNeg = 0;
				if (monthlyRowCount) {
					rowCount = 1;
				}
			}
			
			// This row is in the future?
			if (rowDate <= currentDate) {
				results.push('<tr>');
			} else {
				results.push('<tr class="future">');
			}
			
			if (showRowCount) {
				results.push('<td class="row-count">'+ (rowCount) + '<\/td>');
			}
			
			results.push('<td class="date">'   + rowDate                + '<\/td>');
			results.push('<td class="number">' + prettyFloat(rowAmount) + '<\/td>');
			results.push('<td class="tags">'   + rowTags.join(', ')     + '<\/td>');
			results.push('<td>'                + rowDescription         + '<\/td>');
			results.push('<\/tr>');
				
			// Update totals
			// theTotal += rowAmount;
			// monthTotal += rowAmount;
			// if (rowAmount < 0) {
			// 	monthNeg += rowAmount;
			// } else {
			// 	monthPos += rowAmount;
			// }
		}
		
		// Should we show the full month partials at the last row?
		// if (monthPartials.checked) {
		// 	results.push(getTotalsRow(theTotal, monthTotal, monthNeg, monthPos));
		// } else {
		// 	results.push(getTotalsRow(theTotal));
		// }
		
		results.push('<\/table>');
		results = results.join('\n');

		// Real dirty hack to insert totals row at the table beginning (UGLY!)
		// results = results.replace('<\/th><\/tr>', '<\/th><\/tr>'+getTotalsRow(theTotal));
	}
	else {
		results = labelNoData;
	}
	document.getElementById('report').innerHTML = results;
}

function showReport() {
	if (document.getElementById('optoverview').checked) {
		showOverview();
	} else {
		showDetailed();
	}
}
function init() {
	setCurrentDate();
	populateMonthsCombo();
	
	// Lang-specific info
	document.getElementById('optoverviewlabel'  ).innerHTML = labelOverview;
	document.getElementById('optlastmonthslabel').innerHTML = labelLastMonths;
	document.getElementById('optmonthlylabel'   ).innerHTML = labelMonthly;
	document.getElementById('optregexlabel'     ).innerHTML = labelRegex;
	document.getElementById('optnegatelabel'    ).innerHTML = labelNegate;
	
	if (lang == 'pt') {
		// var sitelink = document.getElementById('sitelink');
		// sitelink.href = 'http://aurelio.net/moneylog';
		// sitelink.title = 'Uma página. Um programa.'
		// document.getElementById('help-en').style.display = 'none';
	} else {
		// document.getElementById('help-pt').style.display = 'none';
	}
	
	// Apply user defaults
	if (defaultOverview)      { document.getElementById('optoverview'  ).click(); }
	if (defaultLastMonths)    { document.getElementById('optlastmonths').click(); }
	if (defaultMonthPartials) { document.getElementById('optmonthly'   ).click(); }
	if (defaultRegex)         { document.getElementById('optregex'     ).click(); }
	if (defaultNegate)        { document.getElementById('optnegate'    ).click(); }
	document.getElementById('filter').value = defaultSearch;
	
	showReport();
	// document.getElementById('filter').focus();
}
window.onload = init;
</script>

</head>

<body>

<div id="toolbar">
	<h1>Changelog<br>NERD</h1>

   	<!-- Not using <form> to avoid action on Enter pressing -->
	<div id="filterbox">
		<input id="filter" size="15" type="text" onKeyUp="showReport()">
		<br>
		<input
			id="optregex" class="trigger" type="checkbox"
			onClick="showReport()"><span
			id="optregexlabel" class="trigger"
			onClick="document.getElementById('optregex').click()"></span>
		
		<input
			id="optnegate" class="trigger" type="checkbox"
			onClick="showReport()"><span
			id="optnegatelabel" class="trigger"
			onClick="document.getElementById('optnegate').click()"></span>
	</div>

	<div id="checkboxes">
		<!-- Overview -->
		<input
			id="optoverview" class="trigger" type="checkbox"
			onClick="toggleOverview()"><span
			id="optoverviewlabel" class="trigger"
			onClick="document.getElementById('optoverview').click()"></span>
		<br>
		
		<!-- Last Months -->
		<input
			id="optlastmonths" class="trigger" type="checkbox"
			onClick="toggleLastMonths()"><span
			id="optlastmonthslabel" class="trigger"
			onClick="document.getElementById('optlastmonths').click()"></span>
		<select
		 	id="lastmonths" size="1" onChange="lastMonthsChanged(this)"></select>
		<br>
	
		<!-- Monthly -->
		<input
		 	id="optmonthly" class="trigger" type="checkbox"
			onClick="toggleMonthly()"><span
			id="optmonthlylabel" class="trigger"
			onClick="document.getElementById('optmonthly').click()"></span>
	</div>
</div>

<div id="content">

<div id="tagsArea">
	<span id="tagMultiAll">
	<input
	 	id="tagMultiAllCheck" type="checkbox" class="trigger"
		onClick="showReport()"><span
		class="trigger"
		onClick="document.getElementById('tagMultiAllCheck').click()">&nbsp;+</span>
	</span>
	<div id="tagList">
	</div>
	<input type="hidden" id="tagCount" value="0">
</div>

<div id="report">
</div>

<noscript>
<p>Sorry. No Javascript detected, it won't work.</p>
<p>Ops! Seu navegador está sem Javascript, sem ele não vai funcionar.</p>
</noscript>

</div>

<pre id="data">

################################################ doc

2000-07-31	01	Coluna do Aurelio| introdução
2000-08-30	02	Coluna do Aurelio| ICQ
2000-09-21	03	Coluna do Aurelio| zgv/ImageMagick (manipulação de imagens)
2000-12-02	04	Coluna do Aurelio| pine (e-mails na tela preta)
2001-01-04	05	Coluna do Aurelio| jogos (uma viagem ao mundo da diversão)
2001-02-22	06	Coluna do Aurelio| arte ascii (artistas do teclado)
2001-04-12	07	Coluna do Aurelio| screen (janelizando o modo texto - parte 1)
2001-05-10	08	Coluna do Aurelio| screen (janelizando o modo texto - parte 2)
2001-06-28	09	Coluna do Aurelio| vim (um vimrc diferente)
2001-08-13	10	Coluna do Aurelio| mpage (impresso ágil em postscript)
2001-08-27	11	Coluna do Aurelio| caracteres de controle (não fuja, domine-os)
2001-11-09	12	Coluna do Aurelio| lynx (navegação turbinada)

2000-03-01	edição 3	Revista do Linux| O Poder do Modo Texto
2000-03-01	edição 3	Revista do Linux| Expressões Regulares - Parte 1
2000-04-01	edição 4	Revista do Linux| Vi, Vim e Venci
2000-04-01	edição 4	Revista do Linux| Áreas Compartilhadas
2000-07-01	edição 7	Revista do Linux| Expressões Regulares - Parte 2
2000-09-01	edição 9	Revista do Linux| Coluna do Aurelio I - Introdução
2000-10-01	edição 10	Revista do Linux| Coluna do Aurelio II - ICQ
2000-11-01	edição 11	Revista do Linux| Coluna do Aurelio III - zgv/ImageMagick
2003-11-01	edição 47	Revista do Linux| Cygwin - O Linux no Windows
2004-01-01	edição 49	Revista do Linux| Pulando com o VI

2004-10-01	edição 2	Revista Linux Magazine| Seleção VI-sual

2003-06-25	1	Dialog --tudo| NASCEU!
2003-06-29	2	Dialog --tudo| clones, histórico
2003-07-05	3	Dialog --tudo| copyright, restruturado
2003-08-27	4	Dialog --tudo| mais exemplos avançados, dialog-tour.sh
2004-08-13	5	Dialog --tudo| #âncoras, gauge e menu dinâmico, help-button, +sshots

2000-08-25	0.1	sed-HOWTO| NASCEU!
2000-09-13	0.2	sed-HOWTO| versão .tgz, seções novas
2000-12-03	0.3	sed-HOWTO| versão txt e sgml, seções novas
2001-02-02	0.4	sed-HOWTO| versão ps e pdf
2003-04-15	0.5	sed-HOWTO| versão HTML tudo-em-um, reformatação geral

2005-07-15	1	AppleScript 4 Py Programmers| NASCEU!
2007-08-31	1	Vídeo-tutorial de PyObjC| NASCEU!
2008-04-14	2	Vídeo-tutorial de PyObjC| Adicionado vídeo da palestra da PyConBrasil
#?????????	1	Installing AppleScripts| NASCEU!

1999-12-01	1	Artigos soltos| Sem Mouse HOWTO - NASCEU!
2000-06-23	1	Artigos soltos| Fanatismo Digital - A Guerra dos Editores - NASCEU!
2003-12-12	1	Artigos soltos| Experiências de um Desenvolvedor de Software Livre (slides) - NASCEU!
2004-08-31	1	Artigos soltos| Editando arquivos do OpenOffice.org no VI - NASCEU!
2003-12-10	1	Artigos soltos| Apostila Conhecendo as Expressões Regulares - NASCEU!
2004-04-24	1	Artigos soltos| Apostila Introdução ao Shell Script - NASCEU!
2004-04-19	1	Artigos soltos| Editor VI - Guia de Referência - NASCEU!

2003-07-09	-	Canivete Suíço do Shell| NASCEU!
2006-12-06	-	Canivete Suíço do Shell| Versão em PDF
2003-07-30	1	Apostila de Shell Profissional| NASCEU!

2006-12-05	1	Desenvolverde| Controle de alterações (diff)

2006-12-18	-	CODARE| NASCEU!

################################################ livro

2001-07-31	1ª edição	Guia Expressões Regulares| NASCEU!

2004-11-17	-	Livro Dominando o SED| NASCEU!
2006-11-10	1ª edição	Livro Expressões Regulares| NASCEU!
2008-03-04	1ª edição	Livro Shell Script Profissional| NASCEU!


################################################ AppleScript

2005-08-23	1.0	AdiumBook| NASCEU!
2005-09-14	1.1	AdiumBook| interface nova, botões Set IM e Add Contact
2006-08-06	1.2	AdiumBook| gtalk, botão reveal in AB, Help
2006-09-23	1.3	AdiumBook| contas múltiplas, estatísticas, universal, defaults
2008-01-08	1.3.1	AdiumBook| correções para a versão nova (1.2) do Adium
#2008-07-??	1.4	AdiumBook|

2007-05-22	1.0	EmoMemory| NASCEU!

2005-10-29	1.0	Export Contacts to MP3 Player| NASCEU!
2005-11-09	1.1	Export Contacts to MP3 Player| Python script atualizado, TELBOOK.EXE versão 1

2005-03-09	1.0	Export Contacts to Yahoo CSV| NASCEU!
2005-03-12	1.1	Export Contacts to Yahoo CSV| nome alternativo caso arquivo já exista
2005-04-18	1.2	Export Contacts to Yahoo CSV| escolha de grupo, mensagens informativas

2008-01-30	1	Gmail to Jabber| NASCEU!
2008-06-16	2	Gmail to Jabber| correções para Mac OS X 10.5.3

2006-04-26	1.0	iPhoto Set Sequential Title| NASCEU!
2006-10-20	1	iPhoto SED| NASCEU!

2005-05-10	1.0	iTunes Rename Disk File| NASCEU!
2008-03-05	2	iTunes Rename Disk File| correções para o Leopard
2006-02-06	1.0	iTunes Search in Lyrics| NASCEU!
2006-02-06	1.0	iTunes SED| NASCEU!
2007-07-12	1.1	iTunes SED| composer tag, multiline substitution
2006-08-26	1.0	iTunes Find Artwork-less| NASCEU!

################################################ Programas

2003-12-12	1.0	RAC| NASCEU!
2004-04-20	1.1	RAC| reescrito: +limpo +rápido -faminto por RAM
2004-12-23	1.2	RAC| endereço usando textos
2005-04-11	1.3	RAC| expressões regulares, --ignore-case

2002-07-09	1.0	SedArkanoid| NASCEU!
2005-05-13	1.1	SedArkanoid| aprovado pelo "sedcheck", roda em qualquer SED

2002-03-15	0.0	SedSokoban| NASCEU!
2002-03-21	0.1	SedSokoban| beep, mais comandos, mais rápido
2002-07-09	0.2	SedSokoban| arrumados os comentários
2003-10-11	0.3	SedSokoban| aprovado pelo "sedcheck", roda em qualquer SED

2001-12-21	0.1	sedsed| NASCEU!
2001-12-22	0.2	sedsed| preserva status do comando "t"
2002-02-22	0.3	sedsed| --help, documentação e binário
2002-03-27	0.3	sedsed| --htmlize
2002-05-08	0.5	sedsed| argumentos igual sed, compatível com python v1.5
2002-11-19	0.6	sedsed| versão .EXE para Windows
2003-01-21	0.7	sedsed| ajustes pra Windows
2003-11-15	0.8	sedsed| opções novas -n e -H, código limpo
2004-12-09	1.0	sedsed| debug +rápido, portável, --dump-debug

2000-11-02	0.0	txt2regex| NASCEU!
2001-02-23	0.1	txt2regex| i18n, freshmeat
2001-04-24	0.2	txt2regex| --nocolor, --history, traduzido p/indonésio
2001-06-13	0.3	txt2regex| --whitebg, classes POSIX, traduzido p/polonês, sourceforge
2001-06-26	0.3.1	txt2regex| feito 100% com comandos do bash
2001-08-02	0.4	txt2regex| test-suite, adicionados mais programas
2001-08-28	0.5	txt2regex| --showmeta, --showinfo
2001-09-05	0.6	txt2regex| (grupos|e|alternativas), traduzido p/alemão
2002-03-04	0.7	txt2regex| --version, --make, --prog, man page, traduzido p/japonês
2004-09-28	0.8	txt2regex| ERs do OpenOffice, bash-3.x, italiano/romeno/espanhol

2007-04-04	1	BookCash| NASCEU!

2000-02-22	-	Funções ZZ| NASCEU!
2000-04-24	-	Funções ZZ| zzcores, zzbeep, zzlimpalixo, zzrpmverdono
2000-05-04	-	Funções ZZ| zzcalcula, zzjpgi, zzgifi, zztrocapalavra, zzajuda, echozz, forzz
2000-05-15	-	Funções ZZ| zzdominiopais, zztrocaextensao, zzkill
2000-06-12	-	Funções ZZ| zzcelulartim, zztrocaarquivo
2000-09-14	-	Funções ZZ| zzdicabl, zzdicdict, zzdicbabel, nome oficial: .bashzz
2000-09-15	-	Funções ZZ| zzbugzilla, getczz
2000-09-20	-	Funções ZZ| zzfreshmeat
2000-11-08	-	Funções ZZ| zzdicmichaelis, zzcep
2000-12-30	-	Funções ZZ| zzcinclude, #!/bin/bash
2001-02-14	-	Funções ZZ| zzdetran
2001-07-24	-	Funções ZZ| zzramones, zzarrumanome, zzdiffpalavra
2001-08-09	-	Funções ZZ| zzdicasl, zzirpf
2001-08-20	-	Funções ZZ| pequenas atualizações
2001-08-28	-	Funções ZZ| zzmaiores
2001-10-01	-	Funções ZZ| zzchavepgp
2001-12-11	-	Funções ZZ| zzcores, zzdetransp
2001-12-28	-	Funções ZZ| zzwhoisbr, zznoticiaslinux
2002-01-07	2.0107	Funções ZZ| zzzz, --version
2002-02-18	2.0218	Funções ZZ| zzcasadosartistas
2002-02-19	2.0219	Funções ZZ| zztv
2002-02-22	2.0222	Funções ZZ| zzsigla
2002-02-28	2.0228	Funções ZZ| zzrpmfind
2002-03-13	2.0313	Funções ZZ| --help para todas as funções
2002-03-15	2.0315	Funções ZZ| zznextel
2002-04-19	2.0419	Funções ZZ| zzpronuncia
2002-06-05	2.0605	Funções ZZ| zzcasadosartistas atualizada para Casa 3
2002-06-11	2.0611	Funções ZZ| pequenas atualizações
2002-06-22	2.0622	Funções ZZ| zzuniq
2002-08-27	2.0827	Funções ZZ| zzhowto
2002-10-30	2.1030	Funções ZZ| pequenas atualizações
2002-11-07	2.1107	Funções ZZ| zzsenha, zzlinuxnews
2002-12-06	2.1206	Funções ZZ| zzascii, seqzz
2003-01-24	3.0124	Funções ZZ| zzletrademusica
2003-02-07	3.0207	Funções ZZ| zzdata
2003-02-11	3.0211	Funções ZZ| pequenas atualizações
2003-02-26	3.0226	Funções ZZ| zzdicportugues
2003-03-17	3.0317	Funções ZZ| pequenas atualizações
2003-04-03	3.0403	Funções ZZ| zzgoogle
2003-05-07	3.0507	Funções ZZ| correção de funções quebradas
2003-06-12	3.0612	Funções ZZ| zzss, zzmaiusculas, zzminusculas
2003-07-13	3.0713	Funções ZZ| zznoticiassec
2003-10-02	3.1002	Funções ZZ| zzconverte, zzcontapalavra
2003-11-24	3.1124	Funções ZZ| correção de funções quebradas
2004-01-28	4.0128	Funções ZZ| zzhora
2004-02-19	4.0219	Funções ZZ| zztempo
2004-03-29	4.0329	Funções ZZ| zzhoracerta, zzmoeda
2004-05-18	4.0518	Funções ZZ| zzbovespa, zzloteria
2004-10-29	4.1029	Funções ZZ| zzwikipedia
2004-11-11	4.1111	Funções ZZ| zznomefoto
2004-12-23	4.1223	Funções ZZ| zznatal, zzcfp, zzcnpj, zzsecurity, zzlinha
2005-03-18	5.0318	Funções ZZ| correção de funções quebradas
2005-05-19	5.0519	Funções ZZ| ~/.zzextra, SED conservador
2005-06-30	5.0630	Funções ZZ| zzlocale
2005-09-30	5.9	Funções ZZ| zzcalculaip, zzipinternet
2005-09-30	-	Funções ZZ| Camiseta ZZ, site FUNCOESZZ.NET
2006-11-14	6.11	Funções ZZ| zzfoneletra
2007-07-17	7.7	Funções ZZ| correção de funções quebradas
2008-03-05	8.3	Funções ZZ| zzbyte, zztool, código limpo, UTF-8
2008-06-20	8.6	Funções ZZ| zzshuffle, Solaris
2008-07-23	8.7	Funções ZZ| zzalfabeto, zzrot13, zzrot47

2001-07-26	0.1	txt2tags| NASCEU!
2001-10-01	0.2	txt2tags| Man Pages, --stdout, --split, --lang
2001-11-09	0.3	txt2tags| URL com nome, data formatada
2002-03-11	0.4	txt2tags| --help, --version, tabelas em HTML
2002-03-22	0.5	txt2tags| --noheaders, interface Web (PHP), STDIN
2002-04-10	0.6	txt2tags| --enumtitle, listas numeradas
2002-06-20	0.7	txt2tags| sintaxe p/Emacs, listas de termos
2002-07-03	0.8	txt2tags| --maskemail, abuseme.t2t, alinhamento de imagens
2002-08-23	0.9	txt2tags| --toc, --toconly, 100% Python (sem shell)
2002-09-25	1.0	txt2tags| --gui, interface gráfica Tk, funciona em Windows e Mac
2002-11-06	1.1	txt2tags| versão faxina
2002-12-03	1.2	txt2tags| LaTeX, unhtml.vim, *.t2t
2002-12-20	1.3	txt2tags| User manual, %!encoding, texto "raw"
2003-02-18	1.4	txt2tags| --toclevel, --style (CSS), alinhamento nas tabelas
2003-05-09	1.5	txt2tags| %!cmdline, -o, -n, -H, TODO, instalador para Windows
2003-05-14	1.5.1	txt2tags| patch para interface gráfica
2003-07-23	1.6	txt2tags| %!preproc, %!postproc, +numtitle+, %!key(target):value
2003-11-30	1.7	txt2tags| %!include, man page
2004-07-25	2.0	txt2tags| XHTML, i18n, pt_BR, RC, W3C, âncora
2004-11-13	2.1	txt2tags| %%mtime %%infile %%outfile %%toc, --quiet, po:hu,it
2004-12-30	2.2	txt2tags| Lout, --css-inside, T2TCONFIG, po:de,fr,es
2005-06-17	2.3	txt2tags| colspan, --dump-source, --config-file, test-suite, Markup Demo, doc:fr,zh,hu
2006-12-24	2.4	txt2tags| %%%, múltiplos %!style, gui verde, tarball menor, doc:cz
2008-07-26	2.5	txt2tags| Wikipedia, Google Code Wiki, DokuWiki, --riscado--, PHP novo, Python&gt;=2, doc:fi,cz

2006-07-08	1	Moneylog Experience| NASCEU!
2007-02-02	2	Moneylog Experience| relatório geral, somente recentes, config, regex, parciais mensais com + e -
2007-12-12	3	Moneylog Experience| tags, numeração de linhas, filtro excluir

2007-10-17	1	CSS Sandbox| NASCEU!
2007-11-08	2	CSS Sandbox| botão CODE

2006-02-23	-	AURELIO.NET| Primeira versão com CSS
2006-03-22	-	AURELIO.NET| Inclusão de anúncios (AdSense)
2006-06-01	-	AURELIO.NET| Tema limãozinho
2006-09-29	-	AURELIO.NET| Tema Genius
2006-12-23	-	AURELIO.NET| Tema TopVerde
2008-05-10	-	AURELIO.NET| Tema kiwi

2006-04-23	-	Blog| Movido para WordPress.com

2006-10-20	aula 1	Baterna| NASCEU!
2006-11-23	aula 2	Baterna| Reggae e Ska
2007-01-26	aula 3	Baterna| Country e Hardcore

2007-05-22	1	MiGuXeiToR| NASCEU!
2007-06-16	1	Engripeitor| NASCEU!
2008-07-07	1	Embriagueitor| NASCEU!

#TODO tags serem links para os docs/programas?
#installing as?
